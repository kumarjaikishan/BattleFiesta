import{u as z,f as g,r as a,j as s,e as d,af as m,a8 as I,a7 as F,T as j,ag as O,Q as u,ae as P}from"./index-BUI111fs.js";import{H as T}from"./index-GOHHUsf-.js";import{R as A}from"./index-CHiAbZmI.js";import{X as B,u as D}from"./Datatablecustomstyle-vxqZsArY.js";const X=()=>{const i=z();g(e=>e.tournacenter);const o=g(e=>e.admin),[H,M]=a.useState(o.contactusform),[y,c]=a.useState(!1),[x,v]=a.useState(""),[h,r]=a.useState(""),[S,w]=a.useState("");a.useEffect(()=>{},[]);const C=e=>{v(e.target.value)},N=(e,t)=>{c(!0),r(e),w(t)},[b,p]=a.useState(!1),k=async e=>{e.preventDefault();try{p(!0);const t=localStorage.getItem("token"),n=await fetch("/api/emailreply",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({contactid:S,email:h,reply:x})}),l=await n.json();n.ok?(r(""),r(""),u.success(l.message,{autoClose:1300}),c(!1),i(m())):u.warn(l.message,{autoClose:1500}),p(!1)}catch(t){p(!1),console.log(t)}},E=async e=>{P({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{const n=localStorage.getItem("token"),l=await fetch("/api/contactusdelete",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({id:e})}),f=await l.json();l.ok?(i(m()),u.success(f.message,{autoClose:1300})):u.warn(f.message,{autoClose:1500})}catch(n){console.log(n)}})},R=[{name:"#",selector:(e,t)=>t+1,width:"50px"},{name:"Name",cell:e=>e.name,width:"180px"},{name:"Email",selector:e=>e.email,width:"200px"},{name:"Message",selector:e=>e.message},{name:"Status",selector:e=>s.jsx("span",{className:e.resolve?"status done":"status pending",title:e.resolve?e.resolvemsg:"",children:e.resolve?"Resolved":"Pending"}),width:"100px"},{name:"Action",selector:e=>s.jsxs("div",{className:"flex gap-2 lg:gap-1",children:[s.jsx(T,{className:"editicon ico",title:"Edit",onClick:()=>N(e.email,e._id)}),s.jsx(A,{className:"deleteicon ico",title:"Delete",onClick:()=>E(e._id)})]}),width:"100px"}];return s.jsx(s.Fragment,{children:s.jsx("div",{className:"adminusers p-1",children:s.jsxs("div",{className:"all",children:[s.jsxs("div",{className:"controler flex flex-col gap-2 py-[5px] sm:flex-row sm:items-center sm:justify-between",children:[s.jsx("h2",{className:"text-center text-lg font-semibold sm:text-left",children:"Query List"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:flex-nowrap sm:justify-end",children:[s.jsx(d,{loading:o.loading,onClick:()=>i(m()),variant:"contained",type:"submit",size:"small",children:"Custom"}),s.jsx(d,{loading:o.loading,onClick:()=>i(m()),loadingPosition:"end",endIcon:s.jsx(I,{}),variant:"outlined",type:"submit",size:"small",children:"REFRESH"})]})]}),s.jsx(B,{columns:R,data:o==null?void 0:o.contactusform,pagination:!0,highlightOnHover:!0,customStyles:D()}),s.jsx(F,{open:y,onClose:()=>c(!1),children:s.jsxs("div",{className:"content w-100",children:[s.jsx("p",{className:"header",children:"Reply"}),s.jsx("div",{className:"modalbody",children:s.jsxs("form",{id:"replyForm",onSubmit:k,children:[s.jsx(j,{sx:{width:"98%"},value:h,onChange:e=>r(e.target.value),label:"Email",size:"small"}),s.jsx(j,{autoFocus:!0,multiline:!0,rows:4,onChange:C,value:x,sx:{width:"98%"},label:"Reply",size:"small"})]})}),s.jsxs("div",{className:"modalfooter",children:[s.jsx(d,{sx:{mr:2},loading:b,loadingPosition:"end",endIcon:s.jsx(O,{}),variant:"contained",type:"submit",form:"replyForm",children:"Send Email"}),s.jsx(d,{size:"small",onClick:()=>c(!1),variant:"outlined",children:" cancel"})]})]})})]})})})};export{X as default};
