import{a as T,u as b,r as c,j as e,ao as I,ai as A,aa as O,T as v,f as z,g as B,S as E,h as y,B as h,ag as N,ap as x,Q as r}from"./index-ykX14AiW.js";import{R as $}from"./index-D8xC2Z3l.js";const V=()=>{const d=T(),p=b(s=>s.admin);b(s=>s.tournacenter),c.useEffect(()=>{},[]);const w=async s=>{s.preventDefault();try{const t=localStorage.getItem("token"),a=await fetch("/api/createvoucher",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await a.json();a.status==200?(d(x()),n(!1),r.success(o.message,{autoClose:1300})):r.warn(o.message,{autoClose:1500})}catch(t){console.log(t)}},C=async s=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Tournament!",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{const a=localStorage.getItem("token"),o=await fetch("/api/deletevoucher",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({id:s})}),g=await o.json();o.ok?(d(x()),r.success(g.message,{autoClose:1300})):r.warn(g.message,{autoClose:1500})}catch(a){console.log(a)}})},S=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/editvoucher",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(i)}),a=await t.json();t.ok?(n(!1),l(m),d(x()),r.success(a.message,{autoClose:1300})):r.warn(a.message,{autoClose:1500})}catch(s){console.log(s)}},k=s=>{f(!0),n(!0),l(t=>({name:s.coupon,percent:s.percent,isactive:s.isactive,id:s._id}))},[j,f]=c.useState(!1),[P,n]=c.useState(!1),u=(s,t)=>{l({...i,[t]:s.target.value})},m={name:"",percent:"",isactive:!0,id:""},[i,l]=c.useState(m);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"voucherpage w-full p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold sm:text-xl",children:"Voucher Page"}),e.jsxs("div",{onClick:()=>{n(!0),f(!1)},title:"Add New Voucher",className:"flex items-center gap-2 px-3 py-2 rounded-full bg-blue-100 text-blue-700 hover:bg-blue-200 cursor-pointer transition",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Create Voucher"})]})]}),e.jsx("div",{className:"cards grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:p.voucher&&p.voucher.map((s,t)=>e.jsxs("div",{className:"card rounded-lg bg-white p-3  border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Plan Name"}),e.jsx("span",{children:s.coupon})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Percent"}),e.jsxs("span",{children:[s.percent,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-medium",children:"Status"}),e.jsx("span",{className:s.isactive?"text-green-700 bg-green-100 px-2 py-[2px] rounded-full text-xs":"text-red-700 bg-red-100 px-2 py-[2px] rounded-full text-xs",children:s.isactive?"Active":"Expired"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[e.jsx(A,{title:"Edit",onClick:()=>k(s),className:"w-5 h-5 text-blue-600 hover:text-blue-800 cursor-pointer transition"}),e.jsx($,{title:"Delete",onClick:()=>C(s._id),className:"w-5 h-5 text-red-600 hover:text-red-800 cursor-pointer transition"})]})]},t))})]}),e.jsx(O,{open:P,onClose:()=>n(!1),children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:w,children:[e.jsx("h2",{children:"Create Voucher"}),e.jsxs("span",{className:"modalcontent",children:[e.jsx(v,{required:!0,value:i.name,onChange:s=>u(s,"name"),fullWidth:!0,label:"Plan Name",size:"small"}),e.jsx(v,{type:"tel",required:!0,value:i.percent,onChange:s=>u(s,"percent"),fullWidth:!0,label:"Percent",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small"}),e.jsxs(z,{fullWidth:!0,size:"small",children:[e.jsx(B,{id:"demo-simple-select-label",children:"Status"}),e.jsxs(E,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i.isactive,label:"status",onChange:s=>u(s,"isactive"),children:[e.jsx(y,{value:!0,children:"Active"}),e.jsx(y,{value:!1,children:"Expired"})]})]}),e.jsxs("div",{style:{width:"100%"},children:[!j&&e.jsx(h,{startIcon:e.jsx(N,{}),type:"submit",variant:"contained",children:" Submit"}),j&&e.jsx(h,{startIcon:e.jsx(N,{}),onClick:S,variant:"contained",children:" Update"}),e.jsx(h,{onClick:()=>{n(!1),l(m)},variant:"outlined",children:" cancel"})]})]})]})})})]})};export{V as default};
