import{a as z,u as j,r as a,j as s,a8 as h,am as d,a9 as I,aa as B,T as f,an as O,B as P,Q as m,ai as T,aj as A}from"./index-lCoMiMSn.js";import{R as D}from"./index-As1eyzrt.js";import{X as F,u as M}from"./AllDbModal-8G-6b8I1.js";const Q=()=>{const i=z();j(e=>e.tournacenter);const n=j(e=>e.admin);a.useState(n.contactusform);const[y,c]=a.useState(!1),[p,v]=a.useState(""),[x,r]=a.useState(""),[S,C]=a.useState("");a.useEffect(()=>{},[]);const b=e=>{v(e.target.value)},w=(e,t)=>{c(!0),r(e),C(t)},[N,u]=a.useState(!1),k=async e=>{e.preventDefault();try{u(!0);const t=localStorage.getItem("token"),o=await fetch("/api/emailreply",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({contactid:S,email:x,reply:p})}),l=await o.json();o.ok?(r(""),r(""),m.success(l.message,{autoClose:1300}),c(!1),i(d())):m.warn(l.message,{autoClose:1500}),u(!1)}catch(t){u(!1),console.log(t)}},E=async e=>{A({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{const o=localStorage.getItem("token"),l=await fetch("/api/contactusdelete",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({id:e})}),g=await l.json();l.ok?(i(d()),m.success(g.message,{autoClose:1300})):m.warn(g.message,{autoClose:1500})}catch(o){console.log(o)}})},R=[{name:"#",selector:(e,t)=>t+1,width:"50px"},{name:"Name",cell:e=>e.name,width:"180px"},{name:"Email",selector:e=>e.email,width:"200px"},{name:"Message",selector:e=>e.message},{name:"Status",selector:e=>s.jsx("span",{className:e.resolve?"status done":"status pending",title:e.resolve?e.resolvemsg:"",children:e.resolve?"Resolved":"Pending"}),width:"100px"},{name:"Action",selector:e=>s.jsxs("span",{children:[s.jsx(T,{className:"editicon ico",title:"Edit",onClick:()=>w(e.email,e._id)}),s.jsx(D,{className:"deleteicon ico",title:"Delete",onClick:()=>E(e._id)})]}),width:"100px"}];return s.jsx(s.Fragment,{children:s.jsx("div",{className:"query",children:s.jsxs("div",{className:"all",children:[s.jsxs("div",{className:"controler",children:[s.jsx("h2",{style:{textAlign:"center"},children:"Query List"}),s.jsxs("div",{children:[s.jsx(h,{loading:n.loading,onClick:()=>i(d()),variant:"contained",type:"submit",size:"small",children:"Custom"}),s.jsx(h,{loading:n.loading,onClick:()=>i(d()),loadingPosition:"end",endIcon:s.jsx(I,{}),variant:"outlined",type:"submit",size:"small",className:"refreshe",children:"REFRESH"})]})]}),s.jsx(F,{columns:R,data:n==null?void 0:n.contactusform,pagination:!0,highlightOnHover:!0,customStyles:M()}),s.jsx(B,{open:y,onClose:()=>c(!1),children:s.jsx("div",{className:"membermodal",children:s.jsxs("form",{onSubmit:k,children:[s.jsx("h2",{children:"Reply"}),s.jsxs("span",{className:"modalcontent",children:[s.jsx(f,{sx:{width:"98%"},value:x,onChange:e=>r(e.target.value),label:"Email",size:"small"}),s.jsx(f,{autoFocus:!0,multiline:!0,rows:4,onChange:b,value:p,sx:{width:"98%"},label:"Reply",size:"small"}),s.jsxs("div",{children:[s.jsx(h,{sx:{mr:2},loading:N,loadingPosition:"end",endIcon:s.jsx(O,{}),variant:"contained",type:"submit",children:"Send Email"}),s.jsx(P,{size:"small",onClick:()=>c(!1),variant:"outlined",children:" cancel"})]})]})]})})})]})})})};export{Q as default};
