import{b as h,a as v,j as e,q as D,F as M,I as F,S as I,M as f,T as L,B as k,Q as d,t as w,u as T,m as S,L as z,v as A,w as O}from"./index-cgkc_4d5.js";const B=({setinp:t,inp:i,membermodal:m,setmembermodal:l})=>{const[o,p]=h.useState({remarks:"",buydate:new Date,expiredate:new Date}),[y,u]=h.useState(!1),b=v();h.useEffect(()=>{},[]);const x=(s,a)=>{p({...o,[a]:s.target.value}),t({...i,[a]:s.target.value})},j=async(s,a)=>{s.preventDefault();let r=o.remarks,g=o.status;try{u(!0);const n=d.loading("Please wait..."),c=localStorage.getItem("token"),C=await fetch("/api/createmembership",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({remarks:r,id:a,flag:g})}),N=await C.json();if(u(!1),C.ok)b(w()),d.update(n,{render:N.message,type:"success",isLoading:!1,autoClose:2100}),l(!1);else return d.update(n,{render:N.message,type:"warn",isLoading:!1,autoClose:2100})}catch(n){u(!1),d.update(toaste,{render:data.message,type:"warn",isLoading:!1,autoClose:5200}),console.log(n)}};return e.jsx(e.Fragment,{children:e.jsx(D,{open:m,onClose:()=>l(!1),children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:s=>j(s,i._id),children:[e.jsx("h2",{children:"Create Membership"}),e.jsxs("span",{className:"modalcontent",children:[e.jsxs(M,{sx:{width:"95%"},size:"small",children:[e.jsx(F,{id:"demo-simple-select-label",children:"Status"}),e.jsxs(I,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i.status,label:"Status",onChange:s=>x(s,"status"),children:[e.jsx(f,{value:"pending",children:"Pending"}),e.jsx(f,{value:"success",children:"Success"}),e.jsx(f,{value:"rejected",children:"Rejected"})]})]}),e.jsx(L,{multiline:!0,rows:3,required:i.status=="rejected",onChange:s=>x(s,"remarks"),value:o.remarks,sx:{width:"95%"},label:"Remarks",size:"small"}),e.jsxs("div",{className:"btn",children:[e.jsx(k,{disabled:y,size:"small",type:"submit",variant:"contained",children:" Submit"}),e.jsx(k,{size:"small",onClick:()=>l(!1),variant:"outlined",children:" cancel"})]})]})]})})})})},P=()=>{var j;const t=T(s=>s.admin);h.useEffect(()=>{},[]);const i=v(),[m,l]=h.useState(null),[o,p]=h.useState(!1),y=s=>{p(!0),l(s)},u=async s=>{O({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Tournament!",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{if(a)try{const r=d.loading("please wait..."),g=localStorage.getItem("token"),n=await fetch("/api/delmemberentry",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({ide:s})}),c=await n.json();n.ok&&(i(w()),d.update(r,{render:c.message,type:"success",isLoading:!1,autoClose:1600}))}catch(r){console.log(r)}})},b={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},x={hidden:{x:-80,y:80,opacity:0,scale:0},visible:{y:0,x:0,scale:1,opacity:1}};return e.jsx(e.Fragment,{children:e.jsxs(S.div,{className:"membershiprequest",children:[e.jsxs("div",{className:"controler",children:[e.jsx("h2",{style:{textAlign:"center"},children:"Membership Appliciations"}),e.jsx(z,{loading:t.loading,onClick:()=>i(w()),loadingPosition:"end",endIcon:e.jsx(A,{}),variant:"outlined",type:"submit",size:"small",className:"refreshe",children:"REFRESH"})]}),e.jsxs("div",{className:"header",children:[e.jsx("span",{children:"S.NO"}),e.jsx("span",{children:"Name"}),e.jsx("span",{children:"Plan"}),e.jsx("span",{children:"coupon"}),e.jsx("span",{children:"Finalprice"}),e.jsx("span",{children:"Date"}),e.jsx("span",{children:"Txn. NO"}),e.jsx("span",{children:"Status"}),e.jsx("span",{children:"Actions"})]}),(t==null?void 0:t.membershipentry.length)<1&&e.jsx("div",{className:"body",children:"No Membership Request Found"}),e.jsx(S.div,{variants:b,initial:"hidden",animate:"visible",layout:!0,className:"body",children:(j=t==null?void 0:t.membershipentry)==null?void 0:j.map((s,a)=>{var c;const r={day:"2-digit",month:"short",year:"numeric"},n=new Date(s.createdAt).toLocaleDateString("en-GB",r);return e.jsxs(S.div,{variants:x,layout:!0,children:[e.jsx("span",{children:a+1}),e.jsx("span",{children:(c=s.user)==null?void 0:c.name}),e.jsx("span",{children:s.plan_id.plan_name}),e.jsx("span",{children:s.coupon?s.coupon:"-"}),e.jsx("span",{children:s.finalpricepaid}),e.jsx("span",{children:n}),e.jsx("span",{title:s.status=="success"?s.membershipId:"",children:s.txn_no}),e.jsx("span",{className:`status ${s.status}`,title:s.status=="rejected"?s.remarks:"",children:s.status}),e.jsxs("span",{children:[e.jsx("i",{className:"fa fa-pencil",onClick:()=>y(s),"aria-hidden":"true"}),e.jsx("i",{className:"fa fa-trash",onClick:()=>u(s._id),"aria-hidden":"true"})]})]},a)})}),m&&e.jsx(B,{setinp:l,inp:m,membermodal:o,setmembermodal:p})]})})};export{P as default};
