import{i as D,k as I,j as e,a as k,l as b,r as n,n as M,o as m,Q as N,T as q,q as R,t as P,v as z,B as G,w as U}from"./index-fSxdXD0r.js";var h={},$=I;Object.defineProperty(h,"__esModule",{value:!0});var S=h.default=void 0,B=$(D()),F=e;S=h.default=(0,B.default)((0,F.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const J=()=>{const c=k(),y=b(),T="https://res.cloudinary.com/dusxlxlvm/image/upload/v1709654642/battlefiesta/assets/logo/logopng250_vuhy4f.webp";n.useEffect(()=>{c(M("Tournaments")),c(m(!0)),E()},[]);const[p,w]=n.useState([]),[f,C]=n.useState([]),[g,L]=n.useState([]),[j,a]=n.useState([]),[x,r]=n.useState([]),[d,_]=n.useState(""),u=s=>{let t=document.querySelectorAll(".conta .cate div");t.forEach(i=>i.classList.remove("active")),t[s].classList.add("active"),s===0?(a(f),r(f)):s===1?(a(p),r(p)):(a(g),r(g))},E=async()=>{try{const s=await fetch("/api/getalltournament",{method:"GET"}),t=await s.json();if(console.log(t),c(m(!1)),!s.ok)return N.warn(t.message,{autoclose:2100});let i=[],l=[],v=[];t.data.forEach(o=>{o.status==="ongoing"&&i.push(o),o.status==="upcoming"&&l.push(o),o.status==="completed"&&v.push(o)}),w(i),C(l),L(v),a(l),r(l)}catch(s){console.log(s),c(m(!1))}},O=async()=>{if(d.trim()===""){a(x);return}try{const s=await fetch("/api/tournamnetsearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournid:d})}),t=await s.json();if(!s.ok)return N.warn(t.message,{autoclose:1500});a([t.query])}catch(s){console.log(s)}},A=s=>{y(`/tournaments/${s}`)};return e.jsxs("div",{className:"findtournas",children:[e.jsxs("div",{className:"conta",children:[e.jsxs("div",{className:"cate",children:[e.jsxs("div",{onClick:()=>u(0),className:"active",children:[e.jsx("i",{className:"fa fa-gamepad","aria-hidden":"true"}),e.jsx("span",{children:"UPCOMING"})]}),e.jsxs("div",{onClick:()=>u(1),children:[e.jsx("i",{className:"fa fa-play","aria-hidden":"true"}),e.jsx("span",{children:"ONGOING"})]}),e.jsxs("div",{onClick:()=>u(2),children:[e.jsx("i",{className:"fa fa-undo","aria-hidden":"true"}),e.jsx("span",{children:"COMPLETED"})]})]}),e.jsx("div",{children:e.jsx(q,{label:"Tournament Id...",fullWidth:!0,size:"small",className:"filled",value:d,onChange:s=>{const t=s.target.value;_(t),t===""&&a(x)},InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(P,{onClick:O,className:"search-icon-button",children:e.jsx(S,{titleAccess:"Search"})})})}})})]}),e.jsxs("div",{className:"cards",children:[j.length<1&&e.jsx("div",{className:"notfound",children:e.jsxs("div",{children:[e.jsx(z,{className:"sad"}),e.jsx("h2",{children:"No Tournament Found"}),e.jsx("p",{children:"This section will be auto updated once any Tournament comes under this section"})]})}),j.map(s=>{const t=new Date(s.createdAt).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),i=new Date(s.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0});return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"img",children:[e.jsx("img",{loading:"lazy",src:s.tournment_logo?s.tournment_logo:T,alt:"logo"}),e.jsx("span",{title:s.title,children:s.title})]}),e.jsxs("h3",{className:"organiser",children:["- ",s.organiser]}),e.jsxs("div",{className:"time",children:[t,", ",i," ",e.jsx("span",{children:s.type})]}),e.jsxs("div",{className:"controller",children:[e.jsx(G,{size:"small",onClick:()=>A(s._id),variant:"contained",endIcon:e.jsx(U,{}),children:"READ MORE"}),e.jsx("p",{className:"status",title:"Status",children:s.status})]})]},s._id)})]})]})};export{J as default};
