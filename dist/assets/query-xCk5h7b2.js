import{a as z,u as g,r as n,j as e,ab as h,ao as d,ac as I,m as y,am as B,aa as P,T as f,ap as T,B as A,Q as u,an as F}from"./index-nbI5vY08.js";import{R as O}from"./index-GdejezHu.js";const Q=()=>{const i=z();g(s=>s.tournacenter);const t=g(s=>s.admin);n.useState(t.contactusform);const[S,c]=n.useState(!1),[x,b]=n.useState(""),[p,r]=n.useState(""),[v,C]=n.useState("");n.useEffect(()=>{},[]);const N=s=>{b(s.target.value)},w=(s,a)=>{c(!0),r(s),C(a)},[k,m]=n.useState(!1),E=async s=>{s.preventDefault();try{m(!0);const a=localStorage.getItem("token"),o=await fetch("/api/emailreply",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({contactid:v,email:p,reply:x})}),l=await o.json();o.ok?(r(""),r(""),u.success(l.message,{autoClose:1300}),c(!1),i(d())):u.warn(l.message,{autoClose:1500}),m(!1)}catch(a){m(!1),console.log(a)}},R=async s=>{F({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{if(a)try{const o=localStorage.getItem("token"),l=await fetch("/api/contactusdelete",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({id:s})}),j=await l.json();l.ok?(i(d()),u.success(j.message,{autoClose:1300})):u.warn(j.message,{autoClose:1500})}catch(o){console.log(o)}})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"query",children:e.jsxs("div",{className:"all",children:[e.jsxs("div",{className:"controler",children:[e.jsx("h2",{style:{textAlign:"center"},children:"Query List"}),e.jsxs("div",{children:[e.jsx(h,{loading:t.loading,onClick:()=>i(d()),variant:"contained",type:"submit",size:"small",children:"Custom"}),e.jsx(h,{loading:t.loading,onClick:()=>i(d()),loadingPosition:"end",endIcon:e.jsx(I,{}),variant:"outlined",type:"submit",size:"small",className:"refreshe",children:"REFRESH"})]})]}),e.jsxs("div",{className:"header",children:[e.jsx("span",{children:"#"}),e.jsx("span",{children:"Name"}),e.jsx("span",{children:"Email"}),e.jsx("span",{children:"Message"}),e.jsx("span",{children:"Status"}),e.jsx("span",{children:"Actions"})]}),(t==null?void 0:t.contactusform.length)<1&&e.jsx("div",{className:"body",children:"No Query Found"}),e.jsx(y.div,{layout:!0,className:"body",children:t.contactusform&&t.contactusform.map((s,a)=>e.jsxs(y.div,{layout:!0,children:[e.jsx("span",{children:a+1}),e.jsx("span",{children:s.name}),e.jsx("span",{children:s.email}),e.jsx("span",{children:s.message}),e.jsx("span",{className:s.resolve?"status done":"status pending",title:s.resolve?s.resolvemsg:"",children:s.resolve?"Resolved":"Pending"}),e.jsxs("span",{children:[e.jsx(B,{className:"editicon ico",title:"Edit",onClick:()=>w(s.email,s._id)}),e.jsx(O,{className:"deleteicon ico",title:"Delete",onClick:()=>R(s._id)})]})]},a))}),e.jsx(P,{open:S,onClose:()=>c(!1),children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:E,children:[e.jsx("h2",{children:"Reply"}),e.jsxs("span",{className:"modalcontent",children:[e.jsx(f,{sx:{width:"98%"},value:p,onChange:s=>r(s.target.value),label:"Email",size:"small"}),e.jsx(f,{autoFocus:!0,multiline:!0,rows:4,onChange:N,value:x,sx:{width:"98%"},label:"Reply",size:"small"}),e.jsxs("div",{children:[e.jsx(h,{sx:{mr:2},loading:k,loadingPosition:"end",endIcon:e.jsx(T,{}),variant:"contained",type:"submit",children:"Send Email"}),e.jsx(A,{size:"small",onClick:()=>c(!1),variant:"outlined",children:" cancel"})]})]})]})})})]})})})};export{Q as default};
