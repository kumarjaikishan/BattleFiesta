import{u as T,f as b,r as c,j as e,ah as I,a7 as A,T as v,q as O,t as z,S as E,v as y,e as h,ac as N,ai as x,Q as o}from"./index-BUI111fs.js";import{H as $}from"./index-GOHHUsf-.js";import{R as B}from"./index-CHiAbZmI.js";const q=()=>{const d=T(),p=b(s=>s.admin);b(s=>s.tournacenter),c.useEffect(()=>{},[]);const w=async s=>{s.preventDefault();try{const t=localStorage.getItem("token"),a=await fetch("/api/createvoucher",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await a.json();a.status==200?(d(x()),n(!1),o.success(i.message,{autoClose:1300})):o.warn(i.message,{autoClose:1500})}catch(t){console.log(t)}},C=async s=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Tournament!",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{const a=localStorage.getItem("token"),i=await fetch("/api/deletevoucher",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({id:s})}),g=await i.json();i.ok?(d(x()),o.success(g.message,{autoClose:1300})):o.warn(g.message,{autoClose:1500})}catch(a){console.log(a)}})},S=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/editvoucher",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await t.json();t.ok?(n(!1),l(m),d(x()),o.success(a.message,{autoClose:1300})):o.warn(a.message,{autoClose:1500})}catch(s){console.log(s)}},k=s=>{j(!0),n(!0),l(t=>({name:s.coupon,percent:s.percent,isactive:s.isactive,id:s._id}))},[f,j]=c.useState(!1),[P,n]=c.useState(!1),u=(s,t)=>{l({...r,[t]:s.target.value})},m={name:"",percent:"",isactive:!0,id:""},[r,l]=c.useState(m);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"voucherpage w-full p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold sm:text-xl",children:"Voucher Page"}),e.jsxs("div",{onClick:()=>{n(!0),j(!1)},title:"Add New Voucher",className:"flex items-center gap-2 px-3 py-2 rounded-full bg-blue-100 text-blue-700 hover:bg-blue-200 cursor-pointer transition",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Create Voucher"})]})]}),e.jsx("div",{className:"cards grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-5",children:p.voucher&&p.voucher.map((s,t)=>e.jsxs("div",{className:"card rounded-lg bg-white p-3  border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Plan Name"}),e.jsx("span",{children:s.coupon})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Percent"}),e.jsxs("span",{children:[s.percent,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-medium",children:"Status"}),e.jsx("span",{className:s.isactive?"text-green-700 bg-green-100 px-2 py-[2px] rounded-full text-xs":"text-red-700 bg-red-100 px-2 py-[2px] rounded-full text-xs",children:s.isactive?"Active":"Expired"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[e.jsx($,{title:"Edit",onClick:()=>k(s),className:"w-5 h-5 text-blue-600 hover:text-blue-800 cursor-pointer transition"}),e.jsx(B,{title:"Delete",onClick:()=>C(s._id),className:"w-5 h-5 text-red-600 hover:text-red-800 cursor-pointer transition"})]})]},t))})]}),e.jsx(A,{open:P,onClose:()=>n(!1),children:e.jsxs("div",{className:"content w-100",children:[e.jsx("p",{className:"header",children:"Create Voucher"}),e.jsx("div",{className:"modalbody",children:e.jsxs("form",{id:"form",onSubmit:w,children:[e.jsx(v,{required:!0,value:r.name,onChange:s=>u(s,"name"),fullWidth:!0,label:"Plan Name",size:"small"}),e.jsx(v,{type:"tel",required:!0,value:r.percent,onChange:s=>u(s,"percent"),fullWidth:!0,label:"Percent",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small"}),e.jsxs(O,{fullWidth:!0,size:"small",children:[e.jsx(z,{id:"demo-simple-select-label",children:"Status"}),e.jsxs(E,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:r.isactive,label:"status",onChange:s=>u(s,"isactive"),children:[e.jsx(y,{value:!0,children:"Active"}),e.jsx(y,{value:!1,children:"Expired"})]})]})]})}),e.jsxs("div",{className:"modalfooter",children:[!f&&e.jsx(h,{startIcon:e.jsx(N,{}),form:"form",type:"submit",variant:"contained",children:" Submit"}),f&&e.jsx(h,{startIcon:e.jsx(N,{}),onClick:S,variant:"contained",children:" Update"}),e.jsx(h,{onClick:()=>{n(!1),l(m)},variant:"outlined",children:" cancel"})]})]})})]})};export{q as default};
