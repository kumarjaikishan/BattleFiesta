import{a as M,b as G,r as a,v as F,w as i,Q as p,j as e,H as B,G as D,x as P,y as z,T as R,z as _,A as $,C as Q,D as H,B as U,E as q}from"./index-Cvqr62AC.js";import{T as J}from"./FindTournCard-Dn6Grlt5.js";import"./dayjs.min-ClVkMLNe.js";const X=()=>{const n=M(),y=G(),[h,S]=a.useState([]),[x,N]=a.useState([]),[g,T]=a.useState([]),[c,o]=a.useState([]),[f,d]=a.useState([]),[C,E]=a.useState(0),[l,j]=a.useState(""),[I,m]=a.useState(!1),[v,O]=a.useState(10);a.useEffect(()=>{n(F("Tournaments")),n(i(!0)),k()},[]);const k=async()=>{try{const t=await fetch("/api/getalltournamentadmin",{method:"GET"}),s=await t.json();if(n(i(!1)),!t.ok)return p.warn(s.message,{autoClose:2e3});let b=[],u=[],w=[];s.data.forEach(r=>{r.status==="ongoing"&&b.push(r),r.status==="upcoming"&&u.push(r),r.status==="completed"&&w.push(r)}),S(b),N(u),T(w),o(u),d(u)}catch(t){console.log(t),n(i(!1))}},A=t=>{E(t),m(!1),t===0?(o(x),d(x)):t===1?(o(h),d(h)):(o(g),d(g))},L=async()=>{if(!l.trim())return p.warn("Search is Empty",{autoClose:1200});if(l.length!==8)return p.warn("Tournament Id must be 8 Digits",{autoClose:1200});try{n(i(!0));const t=await fetch("/api/tournamnetsearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournid:l})}),s=await t.json();if(n(i(!1)),!t.ok)return p.warn(s.message);m(!0),o([s.query])}catch{n(i(!1))}};return e.jsxs("div",{className:"findtournas relative min-h-[calc(100vh-var(--navheight))] bg-amber-50",children:[e.jsx(B,{children:e.jsx("title",{children:"Find Tournaments || BattleFiesta"})}),e.jsxs("div",{className:`w-full top-(--navheightmobile) py-0.5 px-1.25 pb-1 md:py-1 bg-white sticky  z-10\r
                shadow-[5px_5px_10px_rgba(0,0,0,0.4)]\r
                flex flex-col sm:flex-row sm:h-[55px] sm:items-center justify-between gap-2`,children:[e.jsx("div",{className:`w-full sm:w-[65%] h-[30px] sm:h-[40px]\r
                flex justify-between items-center rounded-[10px]\r
                font-semibold text-[11px] md:text-[0.9em] tracking-wider`,children:[{icon:e.jsx(D,{}),label:"UPCOMING"},{icon:e.jsx(P,{}),label:"ONGOING"},{icon:e.jsx(z,{}),label:"COMPLETED"}].map((t,s)=>e.jsxs("div",{onClick:()=>A(s),className:`w-1/3 h-full flex items-center justify-center gap-2 rounded-md cursor-pointer
                          ${C===s?"bg-[var(--primarycolor)] text-white":""}`,children:[e.jsx("span",{className:"text-[20px] md:text-[24px]",children:t.icon}),e.jsx("span",{children:t.label})]},s))}),e.jsxs("div",{className:"w-full sm:w-auto flex items-center gap-2",children:[e.jsx(R,{label:"Tournament ID",size:"small",fullWidth:!0,type:"tel",value:l,onChange:t=>{j(t.target.value),t.target.value||(o(f),m(!1))},InputProps:{endAdornment:l&&e.jsx(_,{position:"end",children:e.jsx($,{className:"cursor-pointer",onClick:()=>{j(""),o(f),m(!1)}})})}}),e.jsx(Q,{onClick:L,className:` w-10 h-8 p-1.5 rounded cursor-pointer text-white\r
                      bg-[var(--primarycolor)] hover:bg-[var(--hovercolor)]`})]})]}),e.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5\r
                gap-7 pt-5 md:p-3 justify-items-center`,children:[c.length===0&&e.jsxs("div",{className:"col-span-full text-center mt-6",children:[e.jsx(H,{className:"text-7xl mx-auto text-gray-400 mb-2"}),e.jsx("p",{children:"No Tournament Found"})]}),c==null?void 0:c.slice(0,v).map(t=>e.jsx(J,{tournament:t,onReadMore:s=>y(`/tournaments/${s}`),showStatus:I},t._id))]}),e.jsx("div",{style:{width:"100%",paddingBottom:"15px",textAlign:"center"},children:e.jsx(U,{size:"small",onClick:()=>O(v+10),variant:"contained",endIcon:e.jsx(q,{}),children:"Load MORE"})})]})};export{X as default};
