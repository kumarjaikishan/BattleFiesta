import{r as o,j as e,f as F,g as D,S as z,h as w,D as _,aq as xe,ar as ge,aF as je,T as x,a as ye,s as fe,au as ve,v as be,w as L,Q as g,B as v,av as Ne,aw as Ce,ax as ke,an as Se,I as le,ay as Ie,az as we,aA as Pe,aB as Te,aC as Re,n as _e,aD as Le,am as Fe,aE as De}from"./index-Cvqr62AC.js";import{_ as ze}from"./index-DhHWQFoj.js";import{u as Oe}from"./imageresizer-D4I-KFLq.js";import{D as R}from"./Divider-ttXbm9jC.js";const Ee=({about:m,categoryenteries:b,entry:y})=>{var f;const[h,N]=o.useState(y),[P,C]=o.useState("all"),T="https://res.cloudinary.com/dusxlxlvm/image/upload/v1718950087/battlefiesta/assets/icon/user_p5egd9.webp",O=i=>{C(i.target.value),i.target.value=="all"?N(y):b.hasOwnProperty(i.target.value)?N(b[i.target.value]):N([])};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"teamse",children:[e.jsx("h2",{children:"Player List"}),e.jsx("div",{style:{margin:"5px 0px"},children:e.jsxs(F,{className:"cominp",size:"small",sx:{mt:1.6,width:"200px"},children:[e.jsx(D,{id:"demo-simple-select-label",children:"Choose Category"}),e.jsxs(z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:m!=null&&m.slotCategory?P:"",required:!0,name:"os",label:"Choose Category",onChange:O,children:[e.jsx(w,{value:"all",children:"All"}),(f=m==null?void 0:m.slotCategory)==null?void 0:f.map((i,t)=>e.jsx(w,{sx:{textTransform:"capitalize"},value:t,children:i.category},t))]})]})}),y.length<1&&e.jsx("div",{className:"notfound",children:e.jsxs("div",{children:[e.jsx(_,{className:"sad"}),e.jsx("h1",{children:"Ops! This List is Empty"}),e.jsx("p",{children:"No Player Registered Yet"})]})}),!b.hasOwnProperty(P)&&(h==null?void 0:h.length)<1&&e.jsx("div",{className:"notfound",children:e.jsxs("div",{children:[e.jsx(_,{className:"sad"}),e.jsx("h1",{children:"Ops! This List is Empty"}),e.jsx("p",{children:"No Player Registered under this Category Yet"})]})}),h==null?void 0:h.map((i,t)=>e.jsxs(xe,{style:{borderRadius:"10px",overflow:"hidden"},sx:{mb:1,minWidth:"95%"},children:[e.jsxs(ge,{expandIcon:e.jsx(je,{}),"aria-controls":"panel1-content",id:"panel1-header",className:`headere ${i.status}`,children:[e.jsx("img",{src:i.logo?i.logo:T,alt:"playerLogo"}),e.jsxs("span",{children:[i.name," "]}),e.jsxs("span",{className:i.status,children:[" ",i.status]})]}),i.status=="rejected"&&e.jsx(x,{id:"outlined-multiline-flexible",label:"Reason of Rejection",multiline:!0,color:"error",focused:!0,inputProps:{style:{fontSize:14}},value:i.reason||"your Fault",maxRows:6,sx:{minWidth:"96%",mb:1,ml:1,mt:2}})]},t))]})})},We=()=>{var G,U,B,K,Y,H,J,Q,V,X,Z,ee,se,ae,te,ne,ie;const m=ye(),{handleImage:b}=Oe(),y=fe("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),[h,N]=o.useState(!1),[P,C]=o.useState(!1),{registerId:T}=ve(),[O,f]=o.useState(!1);o.useEffect(()=>{m(be("Registration")),m(L(!0)),$(T)},[]);const i={userid:"",tournament_id:"",name:"",InGameId:"",mobile:"",email:"",os:"",discord:"",utrno:"",fps:"",device:"",paymentss:"",logo:""},[t,k]=o.useState(i),[n,re]=o.useState({}),[d,oe]=o.useState({}),[E,de]=o.useState([]),[M,ce]=o.useState(!1),[c,me]=o.useState(0),[l,he]=o.useState(),pe=s=>{me(s.target.value)};o.useEffect(()=>{},[l,c]);const $=async s=>{f(!0);try{const a=await fetch("/api/gettdmtournamentform",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tid:s})}),r=await a.json();if(m(L(!1)),console.log(r),a.ok){f(!1);let j=r.enteries,u={};j.map(S=>{const I=S.category;u[I]||(u[I]=[]),u[I].push(S)}),he(u),de(j),k({...t,userid:r.data.userid,tournament_id:r.data.tournament_id}),re(r.data),oe(r.data2)}else g.warn("someting went wrong",{autoClose:2300}),ce(!0)}catch(a){g.warn(a.message,{autoClose:2300}),m(L(!1))}},ue=async s=>{if(s.preventDefault(),n.ask_playerlogo&&!t.logo)return g.warn("Select Team Logo",{autoClose:2300});if(n.ask_payment_ss&&!t.paymentss)return g.warn("Select Payment Screenshot",{autoClose:2300});const a=new FormData;a.append("tid",t.tournament_id),a.append("userid",t.userid),a.append("name",t.name.trim()),a.append("InGameId",t.InGameId),a.append("mobile",t.mobile),a.append("email",t.email),a.append("os",t.os),a.append("discord",t.discord),a.append("category",c),a.append("utrno",t.utrno),a.append("fps",t.fps),a.append("device",t.device),a.append("paymentss",t.paymentss),a.append("logo",t.logo);try{C(!0);const r=g.loading("Please wait..."),j=await fetch("/api/TdmTeamregister",{method:"POST",body:a}),u=await j.json();j.ok?(g.update(r,{render:n.success_msg?n.success_msg:"Registered Successful",type:"success",isLoading:!1,autoClose:1600}),f(!1),k(i),$(T),N(!0)):g.update(r,{render:"Something Went Wrong",type:"warning",isLoading:!1,autoClose:1600}),C(!1)}catch(r){console.error(r),g.update(id,{render:"Registration failed. Please try again.",type:"error",isLoading:!1,autoClose:1600}),C(!1)}},q=async(s,a)=>{let r=180;a=="paymentss"&&(r=680);let j=s.target.files[0],u=await b(r,j),S=document.createElement("img");const I=URL.createObjectURL(u);S.src=I,document.querySelector(`#${a}`).innerHTML="",document.querySelector(`#${a}`).appendChild(S),a=="logo"&&k({...t,logo:u}),a=="paymentss"&&k({...t,paymentss:u})},p=s=>{let a=s.target.name,r=s.target.value;k({...t,[a]:r})},[A,W]=o.useState(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tdmregistartionform",children:[M&&e.jsx("div",{className:"notfound",children:e.jsxs("div",{children:[e.jsx(_,{className:"sad"}),e.jsx("h1",{children:"Ops! Something is Wrong"}),e.jsx("p",{children:"Registration form does not exits!"})]})}),!M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"controler",children:[e.jsx(v,{onClick:()=>W(!1),startIcon:e.jsx(Ne,{}),variant:"contained",color:"primary",children:"Registration Form"}),e.jsx(Ce,{min:1,badgeContent:E.length,color:"success",children:e.jsx(v,{onClick:()=>W(!0),startIcon:e.jsx(ke,{}),variant:"outlined",color:"secondary",children:"Player List"})})]}),!A&&e.jsxs("div",{className:"form",children:[e.jsxs("h2",{children:["Registration : ",d.title]}),e.jsxs("h4",{children:["Organised by : ",d.organiser]}),e.jsx("div",{style:{textAlign:"center",margin:"5px 0px"},children:e.jsxs(F,{className:"cominp",size:"small",sx:{mt:1.6,width:"200px"},children:[e.jsx(D,{id:"demo-simple-select-label",children:"Choose Category"}),e.jsx(z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d!=null&&d.slotCategory?c:"",required:!0,name:"os",label:"Choose Category",onChange:pe,children:(G=d==null?void 0:d.slotCategory)==null?void 0:G.map((s,a)=>e.jsx(w,{sx:{textTransform:"capitalize"},value:a,children:s.category},a))})]})}),e.jsxs("div",{className:"slots",children:[e.jsxs("span",{children:["Total Slots : ",(B=(U=d.slotCategory)==null?void 0:U[c])==null?void 0:B.slots]}),e.jsxs("span",{children:["Registered : ",((K=l==null?void 0:l[c])==null?void 0:K.length)??0]}),e.jsxs("span",{children:["Available : ",((H=(Y=d.slotCategory)==null?void 0:Y[c])==null?void 0:H.slots)-(((J=l==null?void 0:l[c])==null?void 0:J.length)??0)]})]}),e.jsx(R,{variant:"middle"}),n.description&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"desc",children:n.description.split(`
`).map((s,a)=>e.jsxs(Se.Fragment,{children:[s,e.jsx("br",{})]},a))}),e.jsx(R,{variant:"middle"})]}),!h&&n.isopen&&((V=(Q=d.slotCategory)==null?void 0:Q[c])==null?void 0:V.slots)>(((X=l==null?void 0:l[c])==null?void 0:X.length)??0)&&e.jsxs("form",{onSubmit:ue,children:[e.jsxs("div",{className:"compart",children:[e.jsx(x,{className:"cominp",size:"small",required:!0,id:"outlined-basic",label:"In Game Name",value:t.name,name:"name",onChange:p,variant:"outlined"}),e.jsx(x,{className:"cominp",inputProps:{minLength:5,maxLength:15},value:t.InGameId,type:"tel",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small",id:"outlined-basic",name:"InGameId",label:"In Game ID",onChange:p,variant:"outlined"}),n.ask_phone&&e.jsx(x,{className:"cominp",required:!0,size:"small",id:"outlined-basic",name:"mobile",value:t.mobile,type:"tel",inputProps:{minLength:10,maxLength:10},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},onChange:p,label:"Mobile",variant:"outlined"}),n.ask_email&&e.jsx(x,{required:!0,className:"cominp",size:"small",id:"outlined-basic",value:t.email,name:"email",type:"email",onChange:p,label:"Email ID",variant:"outlined"}),n.ask_os&&e.jsxs(F,{required:!0,className:"cominp",size:"small",children:[e.jsx(D,{id:"demo-simple-select-label",children:"Choose OS"}),e.jsxs(z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t.os,name:"os",label:"Choose OS",onChange:p,children:[e.jsx(w,{value:"android",children:"Android"}),e.jsx(w,{value:"ios",children:"Ios"})]})]}),n.ask_discord&&e.jsx(x,{inputProps:{maxLength:22},className:"cominp",required:!0,size:"small",id:"outlined-basic",value:t.discord,name:"discord",onChange:p,label:"Discord ID",variant:"outlined"}),n.ask_fps&&e.jsx(x,{className:"cominp",required:!0,type:"tel",inputProps:{minLength:2,maxLength:3},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small",id:"outlined-basic",name:"fps",value:t.fps,onChange:p,label:"FPS",variant:"outlined"}),n.ask_devicename&&e.jsx(x,{className:"cominp",required:!0,size:"small",id:"outlined-basic",name:"device",value:t.device,onChange:p,label:"Device Name",variant:"outlined"})]}),e.jsx(R,{variant:"middle"}),n.ask_playerlogo&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Set a PlayerLogo*"}),e.jsx("div",{id:"logo"}),e.jsxs(v,{size:"small",sx:{mb:3,mt:.5},component:"label",variant:"contained",startIcon:e.jsx(le,{}),children:["Upload Logo",e.jsx(y,{type:"file",accept:"image/*",onChange:s=>q(s,"logo")})]}),e.jsx("br",{})]}),e.jsx(R,{variant:"middle"}),n.ask_payment_ss&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Set Payment Screenshot*"}),e.jsx("div",{id:"paymentss"}),e.jsxs(v,{size:"small",sx:{mb:.5,mt:.5},component:"label",variant:"contained",startIcon:e.jsx(Ie,{}),children:["Upload S.S",e.jsx(y,{type:"file",accept:"image/*",onChange:s=>q(s,"paymentss")})]}),e.jsx("p",{style:{color:"green",fontSize:"12px"},children:"*Note- UTR/Txn No. must be visible in Screenshot"}),e.jsx(x,{sx:{mb:1,mt:1},type:"tel",inputProps:{minLength:12,maxLength:12},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small",id:"outlined-basic",label:"UTR/TXN NO.",value:t.utrno,name:"utrno",onChange:p,variant:"outlined"}),e.jsx("br",{})]}),e.jsx(v,{loading:P,loadingPosition:"start",startIcon:e.jsx(le,{}),variant:"contained",type:"submit",sx:{mt:1},children:"Register"})]}),!n.isopen&&e.jsxs("div",{className:"closed",children:[e.jsxs("div",{children:[" ",e.jsx(we,{className:"stop"})]}),e.jsx("h1",{children:"REGISTRATION CLOSED"}),e.jsx("p",{children:"The Registration for this tournament has been closed by the Admin"})]}),((ee=(Z=d.slotCategory)==null?void 0:Z[c])==null?void 0:ee.slots)<=(((se=l==null?void 0:l[c])==null?void 0:se.length)??0)&&e.jsxs("div",{className:"closed",children:[e.jsxs("div",{children:[" ",e.jsx(_,{className:"stop"})]}),e.jsx("h1",{children:"Oops! Slot is Full"}),e.jsx("p",{children:"The Registration for this Category has been Full. It Excludes Teams Rejected"})]}),h&&e.jsxs("div",{className:"closed",children:[e.jsxs("div",{children:[" ",e.jsx(Pe,{className:"stop"})]}),e.jsx("h1",{children:"Registration Done ðŸ‘"}),e.jsx("p",{children:"You can now check your registration status on PlayerList at any time, whether it is Pending, Approved, or Rejected"})]}),!h&&n.show_payment&&((te=(ae=d.slotCategory)==null?void 0:ae[c])==null?void 0:te.slots)>(((ne=l==null?void 0:l[c])==null?void 0:ne.length)??0)&&e.jsxs("div",{className:"showpayment",children:[e.jsx("div",{className:"img",children:e.jsx(ze,{style:{height:"auto",maxWidth:"100%",width:"100%"},value:`upi://pay?pa=${n.upi_id}&am=${n.amount}&tn=battleFiesta&cu=INR`,viewBox:"0 0 256 256"})}),e.jsxs("div",{className:"remain",children:[e.jsx("div",{children:n.upi_id}),e.jsxs("div",{children:[e.jsx("b",{children:"Entry Fee:"})," â‚¹",n.amount]}),e.jsx(v,{sx:{mt:1},title:"PAY NOW",onClick:()=>{window.location.href=`upi://pay?pa=${n.upi_id}&am=${n.amount}&tn=battleFiesta&cu=INR`},startIcon:e.jsx(Te,{}),variant:"outlined",color:"primary",children:"Pay Now"})]})]}),e.jsxs("div",{className:"contacts",children:[e.jsx("h2",{children:"Contact Details"}),((ie=n.links)==null?void 0:ie.length)>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"links",children:n.links.map((s,a)=>{if(s.linkType=="whatsapp")return e.jsxs("a",{href:`https://wa.me/+91${s.link}`,target:"_blank",children:[e.jsx("span",{children:e.jsx(Re,{className:"ico"})})," ",e.jsx("span",{children:s.linkName})," "]},a);if(s.linkType=="instagram")return e.jsxs("a",{href:`instagram://user?username={${s.link}}`,target:"_blank",children:[e.jsxs("span",{children:[" ",e.jsx(_e,{className:"ico"})]}),e.jsx("span",{children:s.linkName})," "]},a);if(s.linkType=="phone")return e.jsxs("a",{href:`tel:${parseInt(s.link)}`,target:"_blank",children:[e.jsxs("span",{children:[" ",e.jsx(Le,{className:"ico"})]}),e.jsxs("span",{children:[" ",s.linkName]})]},a);if(s.linkType=="email")return e.jsxs("a",{href:`mailto:${s.link}`,target:"_blank",children:[e.jsx("span",{children:e.jsx(Fe,{className:"ico"})}),e.jsxs("span",{children:[" ",s.linkName]})]},a);if(s.linkType=="link")return e.jsxs("a",{href:s.link,target:"_blank",children:[e.jsx("span",{children:e.jsx(De,{className:"ico"})}),e.jsx("span",{children:s.linkName})," "]},a)})})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"The organiser has not provided any contact details for the tournament."}),e.jsx("p",{children:'If you are the organiser, check "Contact info" section in the tournament dashboard.'})]})]})]}),A&&e.jsx(Ee,{about:d,categoryenteries:l,entry:E})," "]})]})})};export{We as default};
