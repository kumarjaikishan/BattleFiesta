import{c as re,u as le,a as oe,r as V,s as ce,j as e,m as ae,B as z,I as ne,T as D,b as te,N as ue,M as de,F as he,d as pe,e as me,S as fe,f as W,C as xe,g as ge,h as ve,L as je,i as be,k as ye,l as $e,n as we,o as Se,Q as w,p as ie,q as De}from"./index-at3nQOyB.js";var Me={exports:{}};(function(I,se){(function(U,_){I.exports=_()})(re,function(){var U=1e3,_=6e4,Z=36e5,h="millisecond",y="second",M="minute",L="hour",f="day",B="week",j="month",K="quarter",k="year",O="date",J="Invalid Date",N=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var t=["th","st","nd","rd"],s=r%100;return"["+r+(t[(s-20)%10]||t[s]||t[0])+"]"}},A=function(r,t,s){var n=String(r);return!n||n.length>=t?r:""+Array(t+1-n.length).join(s)+r},Q={s:A,z:function(r){var t=-r.utcOffset(),s=Math.abs(t),n=Math.floor(s/60),a=s%60;return(t<=0?"+":"-")+A(n,2,"0")+":"+A(a,2,"0")},m:function r(t,s){if(t.date()<s.date())return-r(s,t);var n=12*(s.year()-t.year())+(s.month()-t.month()),a=t.clone().add(n,j),o=s-a<0,c=t.clone().add(n+(o?-1:1),j);return+(-(n+(s-a)/(o?a-c:c-a))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:j,y:k,w:B,d:f,D:O,h:L,m:M,s:y,ms:h,Q:K}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},F="en",C={};C[F]=S;var X="$isDayjsObject",i=function(r){return r instanceof g||!(!r||!r[X])},d=function r(t,s,n){var a;if(!t)return F;if(typeof t=="string"){var o=t.toLowerCase();C[o]&&(a=o),s&&(C[o]=s,a=o);var c=t.split("-");if(!a&&c.length>1)return r(c[0])}else{var p=t.name;C[p]=t,a=p}return!n&&a&&(F=a),a||!n&&F},u=function(r,t){if(i(r))return r.clone();var s=typeof t=="object"?t:{};return s.date=r,s.args=arguments,new g(s)},l=Q;l.l=d,l.i=i,l.w=function(r,t){return u(r,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var g=function(){function r(s){this.$L=d(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[X]=!0}var t=r.prototype;return t.parse=function(s){this.$d=function(n){var a=n.date,o=n.utc;if(a===null)return new Date(NaN);if(l.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var c=a.match(N);if(c){var p=c[2]-1||0,m=(c[7]||"0").substring(0,3);return o?new Date(Date.UTC(c[1],p,c[3]||1,c[4]||0,c[5]||0,c[6]||0,m)):new Date(c[1],p,c[3]||1,c[4]||0,c[5]||0,c[6]||0,m)}}return new Date(a)}(s),this.init()},t.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},t.$utils=function(){return l},t.isValid=function(){return this.$d.toString()!==J},t.isSame=function(s,n){var a=u(s);return this.startOf(n)<=a&&a<=this.endOf(n)},t.isAfter=function(s,n){return u(s)<this.startOf(n)},t.isBefore=function(s,n){return this.endOf(n)<u(s)},t.$g=function(s,n,a){return l.u(s)?this[n]:this.set(a,s)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(s,n){var a=this,o=!!l.u(n)||n,c=l.p(s),p=function(H,b){var T=l.w(a.$u?Date.UTC(a.$y,b,H):new Date(a.$y,b,H),a);return o?T:T.endOf(f)},m=function(H,b){return l.w(a.toDate()[H].apply(a.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(b)),a)},x=this.$W,v=this.$M,$=this.$D,q="set"+(this.$u?"UTC":"");switch(c){case k:return o?p(1,0):p(31,11);case j:return o?p(1,v):p(0,v+1);case B:var Y=this.$locale().weekStart||0,R=(x<Y?x+7:x)-Y;return p(o?$-R:$+(6-R),v);case f:case O:return m(q+"Hours",0);case L:return m(q+"Minutes",1);case M:return m(q+"Seconds",2);case y:return m(q+"Milliseconds",3);default:return this.clone()}},t.endOf=function(s){return this.startOf(s,!1)},t.$set=function(s,n){var a,o=l.p(s),c="set"+(this.$u?"UTC":""),p=(a={},a[f]=c+"Date",a[O]=c+"Date",a[j]=c+"Month",a[k]=c+"FullYear",a[L]=c+"Hours",a[M]=c+"Minutes",a[y]=c+"Seconds",a[h]=c+"Milliseconds",a)[o],m=o===f?this.$D+(n-this.$W):n;if(o===j||o===k){var x=this.clone().set(O,1);x.$d[p](m),x.init(),this.$d=x.set(O,Math.min(this.$D,x.daysInMonth())).$d}else p&&this.$d[p](m);return this.init(),this},t.set=function(s,n){return this.clone().$set(s,n)},t.get=function(s){return this[l.p(s)]()},t.add=function(s,n){var a,o=this;s=Number(s);var c=l.p(n),p=function(v){var $=u(o);return l.w($.date($.date()+Math.round(v*s)),o)};if(c===j)return this.set(j,this.$M+s);if(c===k)return this.set(k,this.$y+s);if(c===f)return p(1);if(c===B)return p(7);var m=(a={},a[M]=_,a[L]=Z,a[y]=U,a)[c]||1,x=this.$d.getTime()+s*m;return l.w(x,this)},t.subtract=function(s,n){return this.add(-1*s,n)},t.format=function(s){var n=this,a=this.$locale();if(!this.isValid())return a.invalidDate||J;var o=s||"YYYY-MM-DDTHH:mm:ssZ",c=l.z(this),p=this.$H,m=this.$m,x=this.$M,v=a.weekdays,$=a.months,q=a.meridiem,Y=function(b,T,G,ee){return b&&(b[T]||b(n,o))||G[T].slice(0,ee)},R=function(b){return l.s(p%12||12,b,"0")},H=q||function(b,T,G){var ee=b<12?"AM":"PM";return G?ee.toLowerCase():ee};return o.replace(P,function(b,T){return T||function(G){switch(G){case"YY":return String(n.$y).slice(-2);case"YYYY":return l.s(n.$y,4,"0");case"M":return x+1;case"MM":return l.s(x+1,2,"0");case"MMM":return Y(a.monthsShort,x,$,3);case"MMMM":return Y($,x);case"D":return n.$D;case"DD":return l.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return Y(a.weekdaysMin,n.$W,v,2);case"ddd":return Y(a.weekdaysShort,n.$W,v,3);case"dddd":return v[n.$W];case"H":return String(p);case"HH":return l.s(p,2,"0");case"h":return R(1);case"hh":return R(2);case"a":return H(p,m,!0);case"A":return H(p,m,!1);case"m":return String(m);case"mm":return l.s(m,2,"0");case"s":return String(n.$s);case"ss":return l.s(n.$s,2,"0");case"SSS":return l.s(n.$ms,3,"0");case"Z":return c}return null}(b)||c.replace(":","")})},t.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},t.diff=function(s,n,a){var o,c=this,p=l.p(n),m=u(s),x=(m.utcOffset()-this.utcOffset())*_,v=this-m,$=function(){return l.m(c,m)};switch(p){case k:o=$()/12;break;case j:o=$();break;case K:o=$()/3;break;case B:o=(v-x)/6048e5;break;case f:o=(v-x)/864e5;break;case L:o=v/Z;break;case M:o=v/_;break;case y:o=v/U;break;default:o=v}return a?o:l.a(o)},t.daysInMonth=function(){return this.endOf(j).$D},t.$locale=function(){return C[this.$L]},t.locale=function(s,n){if(!s)return this.$L;var a=this.clone(),o=d(s,n,!0);return o&&(a.$L=o),a},t.clone=function(){return l.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},r}(),E=g.prototype;return u.prototype=E,[["$ms",h],["$s",y],["$m",M],["$H",L],["$W",f],["$M",j],["$y",k],["$D",O]].forEach(function(r){E[r[1]]=function(t){return this.$g(t,r[0],r[1])}}),u.extend=function(r,t){return r.$i||(r(t,g,u),r.$i=!0),u},u.locale=d,u.isDayjs=i,u.unix=function(r){return u(1e3*r)},u.en=C[F],u.Ls=C,u.p={},u})})(Me);const Ne=()=>{const I=le(i=>i.userprofile),se=oe(),{handleImage:U}=De(),_="https://res.cloudinary.com/dusxlxlvm/image/upload/v1718950087/battlefiesta/assets/icon/user_p5egd9.webp",Z={name:"",username:"",email:"",phone:"",city:"",state:"",bio:"",publicemail:"",publicphone:"",profile:"",cover:"",sociallinks:""},[h,y]=V.useState(Z),[M,L]=V.useState(""),[f,B]=V.useState({plan:"N/A",planprice:"N/A",buydate:"N/A",expirydate:"N/A",expire_in:"N/A",status:"N/A",tournament:"N/A"});V.useEffect(()=>{I.userprofile&&K()},[I]);const j=ce("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),K=async()=>{if(!I.membership)return;let i=I.userprofile,d=I.membership;y({...h,name:i.name,username:i.username,email:i.email,phone:i.phone,city:i.city,state:i.state,bio:i.bio,publicemail:i.publicemail,publicphone:i.publicphone,sociallinks:i.sociallinks,profile:i.imgsrc,cover:i.coversrc}),I.membership.planid.plan_name&&B({plan:d.planid.plan_name,planprice:d.planid.price,tournament:d.planid.create_limit>500?"Unlimited":d.planid.create_limit,buydate:d.buy_date,expirydate:d.expire_date,expire_in:X(d.expire_date),status:d.isActive?"active":"expired"})},k=()=>{let i={name:"",link:""};y({...h,sociallinks:[...h.sociallinks,i]})},O=i=>{let d=h.sociallinks.filter((u,l)=>l!=i);y({...h,sociallinks:d})},J=(i,d)=>{const u=i.target.name,l=i.target.value,g=[...h.sociallinks];g[d]={...g[d],[u]:l},y({...h,sociallinks:g})},N=i=>{const d=i.target.name,u=i.target.value;y({...h,[d]:u})},[P,S]=V.useState(!1),A=async i=>{i.preventDefault(),S(!0);const d=w.loading("Please wait...");try{const u=localStorage.getItem("token"),l=await fetch("/api/updateprofile",{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(h)}),g=await l.json();if(console.log(g),S(!1),!l.ok)return w.update(d,{render:g.message,type:"warning",isLoading:!1,autoClose:1600});se(ie()),w.update(d,{render:g.message,type:"success",isLoading:!1,autoClose:1600})}catch(u){w.update(d,{render:u.message,type:"warn",isLoading:!1,autoClose:1600}),console.log(u),S(!1)}},Q=async(i,d)=>{const u=i.target.files[0];let l,g;if(d=="profile"?(l=await U(230,u),g="/api/updateprofilepic"):(l=await U(500,u),g="/api/updatecoverpic"),l){const E=w.loading("Uploading Please wait...");S(!0);try{const r=localStorage.getItem("token"),t=new FormData;t.append(d==="profile"?"profilepic":"coverpic",l);const s=await fetch(g,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:t}),n=await s.json();if(S(!1),s.ok){w.update(E,{render:n.message,type:"success",isLoading:!1,autoClose:1600}),se(ie());return}w.update(E,{render:n.message,type:"warning",isLoading:!1,autoClose:1600})}catch(r){w.update(E,{render:r.message,type:"warning",isLoading:!1,autoClose:1600}),console.log(r),S(!1)}}},F=async()=>{try{S(!0);const i=w.loading("Please wait..."),d=localStorage.getItem("token"),u=await fetch("/api/passreset",{method:"Get",headers:{Authorization:`Bearer ${d}`}}),l=await u.json();if(S(!1),!u.ok)return w.update(i,{render:l.message,type:"warn",isLoading:!1,autoClose:2100});L(l.extramessage),w.update(i,{render:l.message,type:"success",isLoading:!1,autoClose:2100})}catch(i){w.update(id,{render:i.message,type:"warn",isLoading:!1,autoClose:2200}),S(!1),console.log(i)}},C=i=>{const d={day:"2-digit",month:"short",year:"numeric"};return new Date(i).toLocaleDateString("en-GB",d)};function X(i){const l=new Date(i)-new Date;return Math.floor(l/(1e3*60*60*24))+1}return e.jsxs("div",{className:"profile",children:[e.jsx(ae.div,{animate:{scale:[1,1.2,1.2,1],rotate:[0,90,90,0],borderRadius:["10%","20%","40%","10%"]},transition:{duration:8,ease:"easeInOut",repeat:1/0},className:"circle circle1"}),e.jsx(ae.div,{animate:{scale:[1,1.1,1.1,1]},transition:{duration:4,repeat:1/0},className:"circle circle2"}),e.jsxs("div",{className:"materials",children:[e.jsxs("div",{className:"profilepic glass",children:[e.jsx("h2",{children:"Profile Picture"}),e.jsxs("div",{className:"coverimg",children:[e.jsx("img",{src:h.cover?h.cover:_,loading:"lazy",alt:"cover picture"}),e.jsx("div",{className:"img",children:e.jsx("img",{src:h.profile?h.profile:_,loading:"lazy",alt:"profile picture"})})]}),e.jsxs(z,{component:"label",sx:{mt:6},disabled:P,role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(ne,{}),className:"splbtn",children:["Change Cover",e.jsx(j,{onChange:i=>Q(i,"cover"),type:"file",accept:"image/*"})]}),e.jsxs(z,{component:"label",sx:{mt:1},disabled:P,role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(ne,{}),className:"splbtn",children:["Change Profile",e.jsx(j,{onChange:i=>Q(i,"profile"),type:"file",accept:"image/*"})]})]}),e.jsxs("div",{className:"profiledeatil glass",children:[e.jsx("h2",{children:"Profile"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"input",children:[e.jsx(D,{size:"small",onChange:N,name:"name",value:h.name,className:"half",label:"Display Name",variant:"outlined"}),e.jsx(D,{size:"small",onChange:N,name:"username",value:h.username,className:"half",label:"UserName",variant:"outlined"}),e.jsx(D,{size:"small",contentEditable:!1,disabled:!0,name:"email",value:h.email,className:"half",label:"Email",variant:"outlined"}),e.jsx(D,{size:"small",onChange:N,name:"phone",value:h.phone,type:"tel",inputProps:{minLength:10,maxLength:10},onKeyPress:i=>{/[0-9]/.test(i.key)||i.preventDefault()},className:"half",label:"Phone",variant:"outlined"}),e.jsx(D,{size:"small",onChange:N,name:"city",value:h.city,className:"half",label:"City",variant:"outlined"}),e.jsx(D,{size:"small",onChange:N,name:"state",value:h.state,className:"half",label:"State",variant:"outlined"}),e.jsx(D,{onChange:N,name:"bio",value:h.bio,multiline:!0,rows:2,className:"full",label:"Bio",variant:"outlined"})]}),e.jsx(z,{disabled:P,variant:"contained",startIcon:e.jsx(te,{}),className:"splbtn",type:"submit",size:"small",children:"Save"})]})]}),e.jsxs("div",{className:"membership glass",children:[e.jsx("h2",{children:"Membership"}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{children:" Plan"})," ",e.jsx("span",{children:":"})," ",e.jsxs("span",{children:[f.plan," Plan"]})," "]}),e.jsxs("p",{children:[e.jsx("span",{children:" Plan price"})," ",e.jsx("span",{children:":"})," ",e.jsxs("span",{children:["₹ ",f.planprice,".00"]})," "]}),e.jsxs("p",{children:[e.jsx("span",{children:" Tournament"})," ",e.jsx("span",{children:":"})," ",e.jsx("span",{children:f.tournament})," "]}),e.jsxs("p",{children:[e.jsx("span",{children:" Buy Date"})," ",e.jsx("span",{children:":"})," ",e.jsx("span",{children:C(f.buydate)})," "]}),e.jsxs("p",{children:[e.jsx("span",{children:" Expiry Date"})," ",e.jsx("span",{children:":"})," ",e.jsxs("span",{children:[C(f.expirydate)," "]})," "]}),e.jsxs("p",{children:[e.jsx("span",{children:" Expire In"})," ",e.jsx("span",{children:":"})," ",e.jsxs("span",{style:{color:f.expire_in<6&&"red"},children:[f.expire_in," Days "]})," "]}),e.jsxs("p",{children:[e.jsx("span",{children:" Status"})," ",e.jsx("span",{children:":"})," ",e.jsx("span",{className:`status ${f.status}`,children:f.status})," "]}),e.jsxs(ue,{className:"navlink",to:"/plan",children:["  ",e.jsx(z,{variant:"contained",className:"splbtn",startIcon:e.jsx(de,{}),children:"Buy Membership"})]})]})]}),e.jsxs("div",{className:"passchange glass",children:[e.jsx("h2",{children:"Change Password"}),e.jsxs("div",{children:[e.jsx(D,{required:!0,name:"link",InputProps:{readOnly:!0},fullWidth:!0,size:"small",value:h.email,className:"half",label:"Email Address",variant:"outlined"}),M&&e.jsx("p",{style:{color:"green",fontSize:"14px"},children:M}),!M.length&&e.jsxs("p",{style:{fontSize:"14px"},children:["A verification email will be sent to ",e.jsx("b",{children:h.email}),"."]}),e.jsx(z,{disabled:P,onClick:F,title:"Feature coming soon",variant:"contained",className:"splbtn",startIcon:e.jsx(he,{}),children:"Send Password Reset Link"})]})]}),e.jsxs("div",{className:"privacy glass",children:[e.jsx("h2",{children:"Privacy"}),e.jsxs("div",{className:"input",children:[e.jsx(D,{onChange:N,name:"publicemail",value:h.publicemail,className:"full",helperText:"This emaill will be visible on your profile page",label:"Public Email",variant:"outlined"}),e.jsx(D,{onChange:N,type:"tel",inputProps:{minLength:10,maxLength:10},onKeyPress:i=>{/[0-9]/.test(i.key)||i.preventDefault()},name:"publicphone",value:h.publicphone,className:"full",helperText:"This phone number will be visible on your profile page",label:"Public Phone",variant:"outlined"})]}),e.jsx(z,{disabled:P,variant:"contained",startIcon:e.jsx(te,{}),className:"splbtn",onClick:A,size:"small",children:"Save"})]}),e.jsxs("div",{className:"social glass",children:[e.jsx("h2",{children:"Social Links"}),e.jsxs("form",{onSubmit:A,children:[h.sociallinks&&h.sociallinks.map((i,d)=>e.jsxs("div",{className:"link",children:[e.jsx("span",{children:e.jsxs(pe,{fullWidth:!0,size:"small",children:[e.jsx(me,{children:"Name*"}),e.jsxs(fe,{labelId:"demo-simple-select-label",value:i.name,required:!0,label:"Name",name:"name",onChange:u=>J(u,d),children:[e.jsxs(W,{value:"facebook",children:[e.jsx(xe,{}),"   Facebook"]}),e.jsxs(W,{value:"youtube",children:[e.jsx(ge,{}),"   Youtube"]}),e.jsxs(W,{value:"instagram",children:[e.jsx(ve,{}),"  Instagram"]}),e.jsxs(W,{value:"discord",children:[e.jsx(je,{}),"  Discord"]}),e.jsxs(W,{value:"telegram",children:[e.jsx(be,{}),"  Telegram"]}),e.jsxs(W,{value:"twitter",children:[e.jsx(ye,{}),"  Twitter"]}),e.jsxs(W,{value:"website",children:[e.jsx($e,{}),"  Website"]})]})]})}),e.jsx("span",{children:e.jsx(D,{required:!0,value:i.link,name:"link",fullWidth:!0,size:"small",onChange:u=>J(u,d),className:"half",label:" Url",variant:"outlined"})}),e.jsxs("span",{title:"Remove This",onClick:()=>O(d),children:[" ",e.jsx(we,{})," "]})]},d)),e.jsx("div",{children:e.jsx(z,{variant:"outlined",onClick:k,startIcon:e.jsx(Se,{}),children:"Add"})}),e.jsx(z,{disabled:P,variant:"contained",startIcon:e.jsx(te,{}),className:"splbtn",type:"submit",size:"small",children:"Save"})]})]})]})]})};export{Ne as default};
