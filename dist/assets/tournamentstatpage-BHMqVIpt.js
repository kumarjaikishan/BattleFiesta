import{a as E,au as $,r as n,w as p,Q as R,j as e,H as v,D as _,c as C,B as l,an as F,bG as u,bk as D,aC as L,n as O,aZ as A,am as B,bE as M}from"./index-Cvqr62AC.js";import{G as P}from"./index-CRYjVKid.js";const H=()=>{var g;const c=E(),{tid:i}=$();n.useEffect(()=>{c(p(!0)),S()},[]);const[j,k]=n.useState(!1),[o,b]=n.useState(!1),[d,y]=n.useState([]),[m,w]=n.useState(""),[s,N]=n.useState(null),[f,h]=n.useState(!1),[r,T]=n.useState(!1);n.useEffect(()=>{r&&(!(s!=null&&s.tournment_banner)||(s==null?void 0:s.tournment_banner)==="")&&h(!0)},[s,r]),n.useEffect(()=>{f&&r&&c(p(!1))},[f,r]);const S=async()=>{try{const t=await fetch("/api/getonetournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tid:i})}),a=await t.json();if(console.log(a),t.ok)b(a.data2),N(a.data),y(a.data2.links),w(a.data2.publicpost);else return k(!0),R.warn(a.message,{autoclose:2100});T(!0)}catch(t){console.log(t),c(p(!1))}},I=t=>new Date(t).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"2-digit",year:"numeric"});let x=window.location.origin;return e.jsxs("div",{className:"tournastat",children:[e.jsx(v,{children:e.jsx("title",{children:"Public Post || BattleFiesta"})}),j&&e.jsx("div",{className:"notfound",children:e.jsxs("div",{children:[e.jsx(_,{className:"sad"}),e.jsx("h2",{children:"Oops! Tournament Not Found"}),e.jsx("p",{children:"Either Tournament is Removed by Owner or Tournament Id is Wrong"})]})}),!j&&e.jsxs(e.Fragment,{children:[(s==null?void 0:s.tournment_banner)!=""&&e.jsx("div",{className:"img",children:e.jsx("img",{src:C(s==null?void 0:s.tournment_banner,{format:"webp"}),loading:"lazy",alt:"Tournament Banner",onLoad:()=>h(!0),onError:()=>h(!0)})}),e.jsxs("div",{className:"info bottomshadow",children:[e.jsxs("div",{className:"upper",children:[e.jsxs("div",{children:[s==null?void 0:s.title," ",e.jsx("span",{children:s==null?void 0:s.status})]}),e.jsxs("div",{children:["Organised by: ",s==null?void 0:s.organiser," "]}),e.jsxs("div",{children:["Created At: ",I(s==null?void 0:s.createdAt),e.jsx(l,{variant:"outlined",title:`View ${(g=s==null?void 0:s.userid)==null?void 0:g.name}'s Channel`,startIcon:e.jsx(P,{}),onClick:()=>{var t;return window.open(`/channel/@${(t=s==null?void 0:s.userid)==null?void 0:t.username}`,"_blank")},children:" View Profile"})]})]}),m&&e.jsx("div",{style:{margin:"10px 0px"},children:m.split(`
`).map((t,a)=>e.jsxs(F.Fragment,{children:[t,e.jsx("br",{})]},a))}),(s==null?void 0:s.type)==="classic"&&e.jsxs("div",{className:"btn",children:[o.isopen&&e.jsx("a",{href:`${x}/${(s==null?void 0:s.type)==="tdm"?"tdmregister":"register"}/${i}`,title:"Register for this Tournament",children:e.jsx(l,{variant:"contained",startIcon:e.jsx(u,{}),children:" REGISTER "})}),e.jsx("a",{href:`${x}/stat/${i}`,title:"View Stats for this tournament",children:e.jsx(l,{variant:"outlined",startIcon:e.jsx(D,{}),children:" LEADERBOARD "})})]}),(s==null?void 0:s.type)==="tdm"&&o.isopen&&e.jsx("div",{className:"btn",children:e.jsx("a",{href:`${x}/tdmregister/${i}`,target:"_blank",title:"Register for this Tournament",children:e.jsx(l,{variant:"contained",startIcon:e.jsx(u,{}),children:" REGISTER "})})}),!o.isopen&&e.jsx("div",{style:{color:"red",textAlign:"center",marginTop:"20px",marginBottom:"20px",fontWeight:500},children:"**Registration is Closed for this Tournament**"}),e.jsxs("div",{className:"contacts",children:[e.jsx("div",{children:"Contacts Details"}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Links"}),e.jsx("div",{className:"links",children:d.map((t,a)=>{if(t.linkType=="whatsapp")return e.jsxs("a",{title:"whatsapp",href:`https://wa.me/+91${t.link}`,target:"_blank",children:[e.jsx("span",{children:e.jsx(L,{className:"ico"})})," ",e.jsx("span",{children:t.linkName})," "]},a);if(t.linkType=="instagram")return e.jsxs("a",{title:"instagram",href:`https://www.instagram.com/${t.link}`,target:"_blank",children:[e.jsxs("span",{children:[" ",e.jsx(O,{className:"ico"})]}),e.jsx("span",{children:t.linkName})," "]},a);if(t.linkType=="phone")return e.jsxs("a",{title:"phone",href:`tel:${parseInt(t.link)}`,target:"_blank",children:[e.jsxs("span",{children:[" ",e.jsx(A,{className:"ico"})]}),e.jsxs("span",{children:[" ",t.linkName]})]},a);if(t.linkType=="email")return e.jsxs("a",{title:"email",href:`mailto:${t.link}`,target:"_blank",children:[e.jsx("span",{children:e.jsx(B,{className:"ico"})}),e.jsxs("span",{children:[" ",t.linkName]})]},a);if(t.linkType=="link")return e.jsxs("a",{title:"link",href:t.link,target:"_blank",children:[e.jsx("span",{children:e.jsx(M,{className:"ico"})}),e.jsx("span",{children:t.linkName})," "]},a)})})]}),d.length<1&&e.jsx("p",{children:'The organiser has not provided any contact details for the tournament. If you are the organiser, check "Contact Info" section in the Basic Setting.'})]})]})," "]})]})};export{H as default};
