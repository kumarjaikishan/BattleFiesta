import{a as A,b as F,r as a,v as G,w as o,Q as h,j as e,H as D,G as P,x as z,y as B,T as R,z as _,A as $,C as Q,D as H,B as U,E as q}from"./index-Cvqr62AC.js";import{T as J}from"./FindTournCard-Dn6Grlt5.js";import"./dayjs.min-ClVkMLNe.js";const X=()=>{const n=A(),y=F(),[x,N]=a.useState([]),[g,S]=a.useState([]),[f,T]=a.useState([]),[l,i]=a.useState([]),[v,d]=a.useState([]),[C,E]=a.useState(0),[c,j]=a.useState(""),[I,m]=a.useState(!1),[p,O]=a.useState(20);a.useEffect(()=>{n(G("Tournaments")),n(o(!0)),k()},[]);const k=async()=>{try{const t=await fetch("/api/getalltournament"),s=await t.json();if(n(o(!1)),!t.ok)return h.warn(s.message);const b=[],u=[],w=[];s.data.forEach(r=>{r.status==="ongoing"&&b.push(r),r.status==="upcoming"&&u.push(r),r.status==="completed"&&w.push(r)}),N(b),S(u),T(w),i(u),d(u)}catch{n(o(!1))}},L=t=>{E(t),m(!1),t===0?(i(g),d(g)):t===1?(i(x),d(x)):(i(f),d(f))},M=async()=>{if(!c.trim())return h.warn("Search is Empty",{autoClose:1200});if(c.length!==8)return h.warn("Tournament Id must be 8 Digits",{autoClose:1200});try{n(o(!0));const t=await fetch("/api/tournamnetsearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournid:c})}),s=await t.json();if(n(o(!1)),!t.ok)return h.warn(s.message);m(!0),i([s.query])}catch{n(o(!1))}};return e.jsxs("div",{className:"findtournas relative min-h-[calc(100vh-var(--navheightmobile))] lg:min-h-[calc(100vh-var(--navheight))] bg-amber-50",children:[e.jsx(D,{children:e.jsx("title",{children:"Find Tournaments || BattleFiesta"})}),e.jsxs("div",{className:`w-full top-(--navheightmobile) py-0.5 px-1.25 pb-1 md:py-1 bg-white sticky  z-10\r
                shadow-[5px_5px_10px_rgba(0,0,0,0.4)]\r
                flex flex-col sm:flex-row sm:h-[55px] sm:items-center justify-between gap-2`,children:[e.jsx("div",{className:`w-full sm:w-[65%] h-[30px] sm:h-[40px]\r
                flex justify-between items-center rounded-[10px]\r
                font-semibold text-[11px] md:text-[0.9em] tracking-wider`,children:[{icon:e.jsx(P,{}),label:"UPCOMING"},{icon:e.jsx(z,{}),label:"ONGOING"},{icon:e.jsx(B,{}),label:"COMPLETED"}].map((t,s)=>e.jsxs("div",{onClick:()=>L(s),className:`w-1/3 h-full flex items-center justify-center gap-2 rounded-md cursor-pointer
                          ${C===s?"bg-[var(--primarycolor)] text-white":""}`,children:[e.jsx("span",{className:"text-[20px] md:text-[24px]",children:t.icon}),e.jsx("span",{children:t.label})]},s))}),e.jsxs("div",{className:"w-full sm:w-auto flex items-center gap-2",children:[e.jsx(R,{label:"Tournament ID",size:"small",fullWidth:!0,type:"tel",value:c,onChange:t=>{j(t.target.value),t.target.value||(i(v),m(!1))},InputProps:{endAdornment:c&&e.jsx(_,{position:"end",children:e.jsx($,{className:"cursor-pointer",onClick:()=>{j(""),i(v),m(!1)}})})}}),e.jsx(Q,{onClick:M,className:` w-10 h-8 p-1.5 rounded cursor-pointer text-white\r
                      bg-[var(--primarycolor)] hover:bg-[var(--hovercolor)]`})]})]}),e.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5\r
                gap-7 pt-5 md:p-3 justify-items-center`,children:[l.length===0&&e.jsxs("div",{className:"col-span-full text-center mt-6",children:[e.jsx(H,{className:"text-7xl mx-auto text-gray-400 mb-2"}),e.jsx("p",{children:"No Tournament Found"})]}),l==null?void 0:l.slice(0,p).map(t=>e.jsx(J,{tournament:t,onReadMore:s=>y(`/tournaments/${s}`),showStatus:I},t._id))]}),l.length>p&&e.jsx("div",{className:" w-full pb-2 text-center",children:e.jsx(U,{size:"small",onClick:()=>O(p+10),variant:"contained",endIcon:e.jsx(q,{}),children:"Load MORE"})})]})};export{X as default};
