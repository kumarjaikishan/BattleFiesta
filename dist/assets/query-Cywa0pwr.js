import{a as z,u as f,r as a,j as s,a9 as p,al as d,aa as I,ab as B,T as j,am as F,B as O,aj as P,Q as m,ak as T}from"./index-_Wlm4QYB.js";import{R as A}from"./index-D729lW8O.js";import{X as D,u as M}from"./AllDbModal-LNl_J_Sb.js";const X=()=>{const i=z();f(e=>e.tournacenter);const o=f(e=>e.admin),[$,H]=a.useState(o.contactusform),[y,c]=a.useState(!1),[x,v]=a.useState(""),[h,r]=a.useState(""),[S,w]=a.useState("");a.useEffect(()=>{},[]);const C=e=>{v(e.target.value)},b=(e,t)=>{c(!0),r(e),w(t)},[N,u]=a.useState(!1),k=async e=>{e.preventDefault();try{u(!0);const t=localStorage.getItem("token"),n=await fetch("/api/emailreply",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({contactid:S,email:h,reply:x})}),l=await n.json();n.ok?(r(""),r(""),m.success(l.message,{autoClose:1300}),c(!1),i(d())):m.warn(l.message,{autoClose:1500}),u(!1)}catch(t){u(!1),console.log(t)}},E=async e=>{T({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{const n=localStorage.getItem("token"),l=await fetch("/api/contactusdelete",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({id:e})}),g=await l.json();l.ok?(i(d()),m.success(g.message,{autoClose:1300})):m.warn(g.message,{autoClose:1500})}catch(n){console.log(n)}})},R=[{name:"#",selector:(e,t)=>t+1,width:"50px"},{name:"Name",cell:e=>e.name,width:"180px"},{name:"Email",selector:e=>e.email,width:"200px"},{name:"Message",selector:e=>e.message},{name:"Status",selector:e=>s.jsx("span",{className:e.resolve?"status done":"status pending",title:e.resolve?e.resolvemsg:"",children:e.resolve?"Resolved":"Pending"}),width:"100px"},{name:"Action",selector:e=>s.jsxs("div",{className:"flex gap-2 lg:gap-1",children:[s.jsx(P,{className:"editicon ico",title:"Edit",onClick:()=>b(e.email,e._id)}),s.jsx(A,{className:"deleteicon ico",title:"Delete",onClick:()=>E(e._id)})]}),width:"100px"}];return s.jsx(s.Fragment,{children:s.jsx("div",{className:"adminusers p-1",children:s.jsxs("div",{className:"all",children:[s.jsxs("div",{className:"controler flex flex-col gap-2 py-[5px] sm:flex-row sm:items-center sm:justify-between",children:[s.jsx("h2",{className:"text-center text-lg font-semibold sm:text-left",children:"Query List"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:flex-nowrap sm:justify-end",children:[s.jsx(p,{loading:o.loading,onClick:()=>i(d()),variant:"contained",type:"submit",size:"small",children:"Custom"}),s.jsx(p,{loading:o.loading,onClick:()=>i(d()),loadingPosition:"end",endIcon:s.jsx(I,{}),variant:"outlined",type:"submit",size:"small",children:"REFRESH"})]})]}),s.jsx(D,{columns:R,data:o==null?void 0:o.contactusform,pagination:!0,highlightOnHover:!0,customStyles:M()}),s.jsx(B,{open:y,onClose:()=>c(!1),children:s.jsxs("div",{className:"content w-100",children:[s.jsx("p",{className:"header",children:"Reply"}),s.jsx("div",{className:"modalbody",children:s.jsxs("form",{id:"replyForm",onSubmit:k,children:[s.jsx(j,{sx:{width:"98%"},value:h,onChange:e=>r(e.target.value),label:"Email",size:"small"}),s.jsx(j,{autoFocus:!0,multiline:!0,rows:4,onChange:C,value:x,sx:{width:"98%"},label:"Reply",size:"small"})]})}),s.jsxs("div",{className:"modalfooter",children:[s.jsx(p,{sx:{mr:2},loading:N,loadingPosition:"end",endIcon:s.jsx(F,{}),variant:"contained",type:"submit",form:"replyForm",children:"Send Email"}),s.jsx(O,{size:"small",onClick:()=>c(!1),variant:"outlined",children:" cancel"})]})]})})]})})})};export{X as default};
