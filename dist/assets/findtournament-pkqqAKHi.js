import{a as k,b as G,r as n,w as M,x as r,Q as l,j as e,G as O,y as b,z as A,T as P,A as R,D as z,E as B,H as F,J as _,B as Q,K as U}from"./index-JuVUp26r.js";const q=()=>{const o=k(),S=G();n.useEffect(()=>{o(M("Tournaments")),o(r(!0)),D()},[]);const[g,C]=n.useState([]),[x,T]=n.useState([]),[j,w]=n.useState([]),[f,a]=n.useState([]),[m,d]=n.useState([]),[u,L]=n.useState(""),[v,y]=n.useState(!1),p=s=>{let t=document.querySelectorAll(".conta .cate div");t.forEach(i=>i.classList.remove("active")),t[s].classList.add("active"),s===0?(a(x),d(x)):s===1?(a(g),d(g)):(a(j),d(j))},D=async()=>{try{const s=await fetch("/api/getalltournament",{method:"GET"}),t=await s.json();if(console.log(t),o(r(!1)),!s.ok)return l.warn(t.message,{autoClose:2e3});let i=[],h=[],N=[];t.data.forEach(c=>{c.status==="ongoing"&&i.push(c),c.status==="upcoming"&&h.push(c),c.status==="completed"&&N.push(c)}),C(i),T(h),w(N),a(h),d(h)}catch(s){console.log(s),o(r(!1))}},E=async()=>{if(u.trim()==="")return a(m),l.warn("Search is Empty",{autoClose:1200});if(u.trim().length!=8)return a(m),l.warn("Tournament Id must be 8 Digits",{autoClose:1200});try{o(r(!0));const s=await fetch("/api/tournamnetsearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournid:u})}),t=await s.json();if(console.log(t),o(r(!1)),!s.ok)return l.warn(t.message,{autoClose:1500});y(!0),a([t.query])}catch(s){o(r(!1)),console.log(s)}},I=s=>{S(`/tournaments/${s}`)};return e.jsxs("div",{className:"findtournas",children:[e.jsxs("div",{className:"conta",children:[e.jsxs("div",{className:"cate",children:[e.jsxs("div",{onClick:()=>p(0),className:"active",children:[e.jsx(O,{}),e.jsx("span",{children:"UPCOMING"})]}),e.jsxs("div",{onClick:()=>p(1),children:[e.jsx(b,{}),e.jsx("span",{children:"ONGOING"})]}),e.jsxs("div",{onClick:()=>p(2),children:[e.jsx(A,{}),e.jsx("span",{children:"COMPLETED"})]})]}),e.jsxs("div",{children:[e.jsx(P,{label:"Tournament ID",fullWidth:!0,size:"small",type:"tel",inputProps:{minLength:8,maxLength:8},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},className:"filled",value:u,onChange:s=>{const t=s.target.value;L(t),t===""&&(a(m),y(!1))}}),e.jsx(R,{onClick:E,title:"Search",className:"searchIcon"})]})]}),e.jsxs("div",{className:"cards",children:[f.length<1&&e.jsx("div",{className:"notfound",children:e.jsxs("div",{children:[e.jsx(z,{className:"sad"}),e.jsx("h2",{children:"No Tournament Found"}),e.jsx("p",{children:"This section will be auto updated once any Tournament comes under this section"})]})}),f.map(s=>{const t=new Date(s.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),i=new Date(s.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"img",children:[e.jsx("img",{loading:"lazy",src:s.tournment_logo?s.tournment_logo:B,alt:"logo"}),e.jsx("span",{title:s.title,children:s.title})]}),e.jsxs("h3",{className:"organiser",children:["- ",s.organiser]}),e.jsxs("div",{className:"time",children:[t,", ",i," ",e.jsx("span",{children:s.type})]}),e.jsxs("div",{className:"tournId",children:[e.jsxs("span",{children:[" ID :- ",s.tournid,e.jsx(F,{title:"Copy Id",onClick:()=>{navigator.clipboard.writeText(s.tournid),l.success("Copied",{autoClose:1e3})}})]}),e.jsxs("span",{children:[" ",e.jsx(_,{})," ",s.totalTeamsRegistered," /",s.slots," "]})]}),e.jsxs("div",{className:"controller",children:[e.jsx(Q,{size:"small",onClick:()=>I(s._id),variant:"contained",endIcon:e.jsx(U,{}),children:"READ MORE"}),v&&e.jsx("p",{className:"status",title:"Status",children:s.status})]})]},s._id)})]})]})};export{q as default};
