import{u as b,a as L,b as p,j as e,L as M,U as x,v as U,q as B,T as y,F as w,I as C,S as v,M as c,B as N,w as E,Q as t}from"./index-ZItC6ACF.js";const F=()=>{var j;const h=b(s=>s.admin),S=b(s=>s.admin),m=L(),u={id:"",name:"",phone:"",isverified:"",isadmin:""},[i,o]=p.useState(u);p.useEffect(()=>{},[]);const k=s=>{const a={day:"2-digit",month:"short",year:"numeric"};return new Date(s).toLocaleDateString("en-GB",a)},z=async s=>{if(E({title:"Are you sure?",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{if(a){const n=t.loading("Please wait...");try{const l=localStorage.getItem("token"),f=await fetch("/api/deleteuser",{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({userid:s})}),g=await f.json();if(f.ok)m(x()),t.update(n,{render:g.message,type:"success",isLoading:!1,autoClose:2100});else return t.update(n,{render:g.message,type:"warn",isLoading:!1,autoClose:2100})}catch(l){t.update(n,{render:data.message,type:"warn",isLoading:!1,autoClose:5200}),console.log(l)}}}),!s)return t.warn("UserId cannot be blank")},[D,r]=p.useState(!1),I=async s=>{s.preventDefault();try{const a=localStorage.getItem("token"),n=await fetch("/api/editUser",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(i)}),l=await n.json();r(!1),n.status==200?(m(x()),o(u),t.success(l.message,{autoClose:1300})):t.warn(l.message,{autoClose:1500})}catch(a){console.log(a)}},A=s=>{console.log(s),o({id:s._id,name:s.name,phone:s.phone,isverified:s.isverified,isadmin:s.isadmin}),r(!0)},d=(s,a)=>{o({...i,[a]:s.target.value})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"adminusers",children:[e.jsxs("div",{className:"controler",children:[e.jsx("h2",{style:{textAlign:"center"},children:"Membership Appliciations"}),e.jsx(M,{loading:S.loading,onClick:()=>m(x()),loadingPosition:"end",endIcon:e.jsx(U,{}),variant:"outlined",type:"submit",size:"small",className:"refreshe",children:"REFRESH"})]}),e.jsxs("div",{className:"header",children:[e.jsx("span",{children:"S.NO"}),e.jsx("span",{children:"Name"}),e.jsx("span",{children:"Mobile"}),e.jsx("span",{children:"Email"}),e.jsx("span",{children:"Date"}),e.jsx("span",{children:"Actions"})]}),e.jsx("div",{className:"body",children:(j=h==null?void 0:h.users)==null?void 0:j.map((s,a)=>e.jsxs("div",{children:[e.jsx("span",{children:a+1}),e.jsx("span",{children:s.name}),e.jsx("span",{children:s.phone}),e.jsx("span",{children:s.email}),e.jsx("span",{children:k(s.createdAt)}),e.jsxs("span",{children:[e.jsx("i",{className:"fa fa-pencil",onClick:()=>A(s),"aria-hidden":"true"}),e.jsx("i",{className:"fa fa-trash",onClick:()=>z(s._id),"aria-hidden":"true"})]})]},a))}),e.jsx(B,{open:D,onClose:()=>r(!1),children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:I,children:[e.jsx("h2",{children:"User Detail"}),e.jsxs("span",{className:"modalcontent",children:[e.jsx(y,{required:!0,value:i.name,onChange:s=>d(s,"name"),sx:{width:"98%"},label:"Name",size:"small"}),e.jsx(y,{type:"tel",required:!0,value:i.phone,onChange:s=>d(s,"phone"),sx:{width:"98%"},label:"Mobile",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small"}),e.jsxs(w,{sx:{width:"98%"},size:"small",children:[e.jsx(C,{id:"demo-simple-select-label",children:"Verify"}),e.jsxs(v,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i.isverified,label:"status",onChange:s=>d(s,"isverified"),children:[e.jsx(c,{value:!0,children:"Yes"}),e.jsx(c,{value:!1,children:"No"})]})]}),e.jsxs(w,{sx:{width:"98%"},size:"small",children:[e.jsx(C,{id:"demo-simple-select-label",children:"Admin"}),e.jsxs(v,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i.isadmin,label:"status",onChange:s=>d(s,"isadmin"),children:[e.jsx(c,{value:!0,children:"Yes"}),e.jsx(c,{value:!1,children:"No"})]})]}),e.jsxs("div",{style:{width:"100%"},children:[e.jsx(N,{size:"small",type:"submit",variant:"contained",children:" Update"}),e.jsx(N,{size:"small",onClick:()=>{r(!1),o(u)},variant:"outlined",children:" cancel"})]})]})]})})})]})})};export{F as default};
