import{a as I,q as k,r as n,t as O,v as p,Q as c,j as s,G as b,w as M,T as A,x as G,y as P,z as _,B as z,A as F}from"./index-1jAYOS9k.js";import{a as R}from"./index-7IRLhORG.js";const B=()=>{const r=I(),N=k(),S="https://res.cloudinary.com/dusxlxlvm/image/upload/v1709654642/battlefiesta/assets/logo/logopng250_vuhy4f.webp";n.useEffect(()=>{r(O("Tournaments")),r(p(!0)),L()},[]);const[g,C]=n.useState([]),[x,v]=n.useState([]),[j,T]=n.useState([]),[f,a]=n.useState([]),[m,l]=n.useState([]),[d,w]=n.useState(""),h=e=>{let t=document.querySelectorAll(".conta .cate div");t.forEach(o=>o.classList.remove("active")),t[e].classList.add("active"),e===0?(a(x),l(x)):e===1?(a(g),l(g)):(a(j),l(j))},L=async()=>{try{const e=await fetch("/api/getalltournament",{method:"GET"}),t=await e.json();if(console.log(t),r(p(!1)),!e.ok)return c.warn(t.message,{autoClose:2e3});let o=[],u=[],y=[];t.data.forEach(i=>{i.status==="ongoing"&&o.push(i),i.status==="upcoming"&&u.push(i),i.status==="completed"&&y.push(i)}),C(o),v(u),T(y),a(u),l(u)}catch(e){console.log(e),r(p(!1))}},D=async()=>{if(d.trim()==="")return a(m),c.warn("Search is Empty",{autoClose:1200});if(d.trim().length!=8)return a(m),c.warn("Tournament Id must be 8 Digits",{autoClose:1200});try{const e=await fetch("/api/tournamnetsearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournid:d})}),t=await e.json();if(!e.ok)return c.warn(t.message,{autoClose:1500});a([t.query])}catch(e){console.log(e)}},E=e=>{N(`/tournaments/${e}`)};return s.jsxs("div",{className:"findtournas",children:[s.jsxs("div",{className:"conta",children:[s.jsxs("div",{className:"cate",children:[s.jsxs("div",{onClick:()=>h(0),className:"active",children:[s.jsx(b,{}),s.jsx("span",{children:"UPCOMING"})]}),s.jsxs("div",{onClick:()=>h(1),children:[s.jsx(R,{}),s.jsx("span",{children:"ONGOING"})]}),s.jsxs("div",{onClick:()=>h(2),children:[s.jsx(M,{}),s.jsx("span",{children:"COMPLETED"})]})]}),s.jsxs("div",{children:[s.jsx(A,{label:"Tournament ID",fullWidth:!0,size:"small",inputProps:{minLength:8,maxLength:8},onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},className:"filled",value:d,onChange:e=>{const t=e.target.value;w(t),t===""&&a(m)}}),s.jsx(G,{onClick:D,title:"Search",className:"searchIcon"})]})]}),s.jsxs("div",{className:"cards",children:[f.length<1&&s.jsx("div",{className:"notfound",children:s.jsxs("div",{children:[s.jsx(P,{className:"sad"}),s.jsx("h2",{children:"No Tournament Found"}),s.jsx("p",{children:"This section will be auto updated once any Tournament comes under this section"})]})}),f.map(e=>{const t=new Date(e.createdAt).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),o=new Date(e.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0});return s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"img",children:[s.jsx("img",{loading:"lazy",src:e.tournment_logo?e.tournment_logo:S,alt:"logo"}),s.jsx("span",{title:e.title,children:e.title})]}),s.jsxs("h3",{className:"organiser",children:["- ",e.organiser]}),s.jsxs("div",{className:"time",children:[t,", ",o," ",s.jsx("span",{children:e.type})]}),s.jsxs("div",{className:"tournId",children:["ID :- ",e.tournid,s.jsx(_,{title:"Copy Id",onClick:()=>{navigator.clipboard.writeText(e.tournid),c.success("Copied",{autoClose:1e3})}})]}),s.jsxs("div",{className:"controller",children:[s.jsx(z,{size:"small",onClick:()=>E(e._id),variant:"contained",endIcon:s.jsx(F,{}),children:"READ MORE"}),s.jsx("p",{className:"status",title:"Status",children:e.status})]})]},e._id)})]})]})};export{B as default};
