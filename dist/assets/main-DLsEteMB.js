import{u as W,f as q,r as u,g as pe,j as e,T as f,ab as se,e as C,x as ke,q as O,t as R,S as $,v as T,aV as Z,aW as B,Q as b,bp as U,aY as ie,ac as we,aq as Se,ar as Ne,aw as J,aF as Pe,at as Ie,am as Te,aZ as xe,aC as Le,a_ as Ae,b0 as le,b1 as oe,b2 as re,a9 as De,d as Y,au as G,b3 as E,b4 as ze,b5 as _e,b7 as ge,s as ee,b8 as je,ax as Ee,b9 as Fe,ba as Me,a7 as ve,bq as Oe,bd as Re,a as $e,h as Ue,ae as qe,br as Be,bl as We,K as de,bo as ce}from"./index-BUI111fs.js";import{u as be}from"./imageresizer-D4I-KFLq.js";import{R as Ge,a as me,D as Ve,b as He,c as fe}from"./apiWrapper-fuQ2P8_c.js";import{B as M}from"./Box-s17l6q7Q.js";import{F as he,a as Ke}from"./Switch-DuK86vMO.js";import{D as Je}from"./DialogContent-B4F0G4H-.js";import{D as ue}from"./Divider-CUUX_Pq3.js";const Ye=()=>{const{handleImage:o}=be(),p=W(),h=q(r=>r.tdm),[d,x]=u.useState(!1),g={tid:h.tdmdetail._id||"",title:h.tdmdetail.title||"",organiser:h.tdmdetail.organiser||"",slots:h.tdmdetail.slots||"",type:h.tdmdetail.type||"",banner:h.tdmdetail.tournment_banner||"",logo:h.tdmdetail.tournment_logo||"",status:h.tdmdetail.status||"",visibility:h.tdmdetail.visibility||!1,label:h.tdmdetail.label||"",slotCategory:h.tdmdetail.slotCategory||[{category:"All",slots:h.tdmdetail.slots}]},[n,j]=u.useState(g),v=r=>{let i=r.target.name,s=r.target.value;j({...n,[i]:s})};u.useEffect(()=>{});const c=async r=>{x(!0);let i=0,s="";r=="tournbanner"?i=1:i=2;let t=document.querySelector(`#${r}`).files[0];i==2?t=await o(300,t):t=await o(900,t),i==1?s=n.banner:s=n.logo;let l=new FormData;l.append("tid",n.tid),l.append("filed",r),l.append("image",t),l.append("oldimage",s);const m=localStorage.getItem("token"),S=b.loading("Please wait while Uploading...");try{const I=await fetch("/api/settournamentlogos",{method:"POST",headers:{Authorization:`Bearer ${m}`},body:l}),L=await I.json();if(x(!1),!I.ok)return b.update(S,{render:L.message,type:"warning",isLoading:!1,autoClose:1600});p(U(n.tid)),i==1?j({...n,banner:L.url}):j({...n,logo:L.url}),b.update(S,{render:L.message,type:"success",isLoading:!1,autoClose:1600})}catch(I){console.log(I),b.update(S,{render:I.message,type:"warn",isLoading:!1,autoClose:1600})}},N=async()=>{let r=0;if(n.slotCategory.map(i=>{r+=i.slots}),r>n.slots)return b.warn("Catergory slots can't be more than Total slots",{autoClose:2200});x(!0);try{const i=b.loading("Please wait..."),s=localStorage.getItem("token"),t=await fetch("/api/settournament",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(n)}),l=await t.json();x(!1),t.ok?(b.update(i,{render:l.message,type:"success",isLoading:!1,autoClose:1600}),p(U(n.tid))):b.update(i,{render:l.message,type:"warn",isLoading:!1,autoClose:1600})}catch(i){x(!1),b.update(ide,{render:i.message,type:"warn",isLoading:!1,autoClose:1600}),console.log(i)}},a=pe("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),P=()=>{let r=0;n.slotCategory.map(s=>{r+=s.slots});let i=n.slots;{const s={category:"",slots:parseInt(i-r)};j(t=>({...t,slotCategory:[...t.slotCategory,s]}))}},k=(r,i,s)=>{let{value:t}=r.target;s=="slots"&&t!=""&&(t=parseInt(t));const l=[...n.slotCategory];l[i]={...l[i],[s]:t},j({...n,slotCategory:l})},y=r=>{let i=n.slotCategory.filter((s,t)=>t!=r);j({...n,slotCategory:i})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tournawrapper",children:[e.jsxs("div",{className:"tournainfo",children:[e.jsx("h2",{children:"Tournament Info"}),e.jsx(f,{helperText:"Name of your tournament",id:"demo-helper-text-misaligned",label:"Tournament Name*",sx:{m:1,mt:2},size:"small",value:n.title,name:"title",onChange:v}),e.jsx(f,{helperText:"Organiser Name of your tournament",id:"demo-helper-text-misaligned",label:"Organiser*",sx:{m:1},size:"small",name:"organiser",value:n.organiser,onChange:v}),e.jsx(f,{helperText:"Max. Slots for your tournament",id:"demo-helper-text-misaligned",label:"Slots*",sx:{m:1},size:"small",type:"tel",onKeyPress:r=>{/[0-9]/.test(r.key)||r.preventDefault()},name:"slots",value:n.slots,onChange:v}),e.jsxs("div",{className:"category",children:[e.jsx("h4",{children:"Choose Category"}),n.slotCategory.map((r,i)=>e.jsxs("div",{className:"child",children:[e.jsx(f,{size:"small",sx:{width:"115px"},value:r.category,onChange:s=>k(s,i,"category"),label:"Category",variant:"outlined"}),e.jsx(f,{size:"small",value:r.slots,inputProps:{minLength:5,maxLength:15},type:"tel",sx:{width:"85px"},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},onChange:s=>k(s,i,"slots"),label:"Max. slots",variant:"outlined"}),e.jsx(se,{sx:{width:"25px"},className:"DeleteIcon",onClick:()=>y(i)})]},i)),e.jsx(C,{title:"Add New Category",size:"small",onClick:P,startIcon:e.jsx(ke,{}),variant:"outlined",color:"primary",children:"Add"})]}),e.jsxs(O,{size:"small",sx:{m:1,Width:"98%"},children:[e.jsx(R,{id:"demo-simple-select-helper-label",children:"Type*"}),e.jsxs($,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:n.type,label:"type ",name:"type",disabled:!0,onChange:v,children:[e.jsx(T,{value:"classic",children:"Classic"}),e.jsx(T,{value:"tdm",children:"TDM"})]}),e.jsx(Z,{children:"The type: Classic or TDM"})]}),e.jsxs(O,{size:"small",sx:{m:1,Width:"96%"},children:[e.jsx(R,{id:"demo-simple-select-helper-label",children:"Status*"}),e.jsxs($,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:n.status,label:"Status",name:"status",onChange:v,children:[e.jsx(T,{value:"upcoming",children:"UPCOMING"}),e.jsx(T,{value:"ongoing",children:"ONGOING"}),e.jsx(T,{value:"completed",children:"COMPLETED"})]}),e.jsx(Z,{children:"Status of your tournament"})]}),e.jsxs(O,{size:"small",sx:{m:1,Width:"96%"},children:[e.jsx(R,{id:"demo-simple-select-helper-label",children:"Visibility*"}),e.jsxs($,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:n.visibility,label:"Visibility",name:"visibility",onChange:v,children:[e.jsx(T,{value:!0,children:"PUBLISHED"}),e.jsx(T,{value:!1,children:"HIDDEN"})]}),e.jsx(Z,{children:"Should your tournament be visible in website'stournament list?"})]}),e.jsx(f,{helperText:"Add labels to your tournament, keep it short",id:"demo-helper-text-misaligned",label:"Label",sx:{m:1,width:"96%"},size:"small",name:"label",value:n.label,onChange:v}),e.jsx(C,{loading:d,loadingPosition:"start",startIcon:e.jsx(B,{}),variant:"contained",onClick:N,children:"UPDATE"})]}),e.jsx("div",{className:"right",children:e.jsxs("div",{className:"logos",children:[e.jsxs("div",{className:"tourn_banner",children:[e.jsx("h2",{children:"Tournament Banner"}),n.banner?e.jsx("img",{src:n.banner,alt:"banner"}):e.jsx("h3",{children:"No Banner has been uploaded for the tournament"}),e.jsxs(C,{disabled:d,component:"label",size:"small",variant:"contained",startIcon:e.jsx(B,{}),children:["Upload",e.jsx(a,{accept:"image/*",type:"file",id:"tournbanner",onChange:()=>c("tournbanner")})]}),e.jsx("p",{children:"A cover image for the tournament."})]}),e.jsxs("div",{className:"tourna_logo",children:[e.jsx("h2",{children:"Tournament Logo"}),n.logo?e.jsx("img",{src:n.logo,alt:"logo"}):e.jsx("h3",{children:"No Logo has been uploaded for the tournament"}),e.jsxs(C,{disabled:d,component:"label",size:"small",variant:"contained",startIcon:e.jsx(B,{}),children:["Upload",e.jsx(a,{accept:"image/*",type:"file",id:"tournlogo",onChange:()=>c("tournlogo")})]}),e.jsx("p",{children:"Tips: The Image should be in Square"})]})]})})]})})},Qe=({all:o,handleChange:p,submit:h,isloading:d})=>{const x=(g,n)=>e.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{mb:1,px:1},children:[e.jsx(ie,{children:g}),e.jsx(Ke,{checked:!!o[n],onChange:j=>p({target:{name:n,value:j.target.checked}}),color:"success"})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"maine",children:[e.jsx("h2",{children:"Form Setting"}),e.jsxs(M,{className:"box",component:"form",sx:{"& .MuiTextField-root":{m:1}},noValidate:!0,autoComplete:"off",children:[e.jsx(ie,{id:"demo-row-radio-buttons-group-label",children:"Registration"}),e.jsxs(Ge,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"isopen",value:o.isopen,onChange:p,children:[e.jsx(he,{value:!0,control:e.jsx(me,{}),label:"Open"}),e.jsx(he,{value:!1,control:e.jsx(me,{}),label:"closed"})]}),e.jsx(f,{id:"outlined-multiline-static",label:"Description",multiline:!0,name:"description",className:"taxi",size:"small",rows:7,inputProps:{style:{fontSize:"11px",lineHeight:"12px"}},onChange:p,value:o.description,helperText:"Add description or message to show on registration page."}),e.jsx(f,{id:"outlined-multiline-static",label:"Successful  Message",multiline:!0,className:"taxi",size:"small",value:o.success_message,inputProps:{style:{fontSize:11}},rows:1,name:"success_message",onChange:p,placeholder:"Add description or message to show after Successful Registration"}),e.jsx("h3",{children:"Options:"}),x("Ask for Email","ask_email"),x("Ask for Phone Number","ask_phone"),x("Ask for Discord ID","ask_discord"),x("Ask for Team Logo","ask_teamlogo"),x("Ask for Player Logo","ask_playerlogo"),x("Ask for Payment Screenshot Upload","ask_payment_ss"),x("Show Payment Option","show_payment"),o.show_payment&&e.jsxs(e.Fragment,{children:[e.jsx(f,{id:"outlined-number",label:"Upi Id",className:"taxi",value:o.upi_id,name:"upi_id",size:"small",InputLabelProps:{shrink:!0},onChange:p,helperText:"Enter upi to receive Payment"}),e.jsx(f,{id:"outlined-number",label:"Amount",type:"tel",className:"taxi",onKeyPress:g=>{/[0-9]/.test(g.key)||g.preventDefault()},value:o.amount,name:"amount",size:"small",InputLabelProps:{shrink:!0},onChange:p,helperText:"Enter Amount to be received"})]}),x("Ask for OS","ask_os"),x("Ask for FPS","ask_fps"),x("Ask for Device Name","ask_devicename"),e.jsx(C,{onClick:h,loading:d,loadingPosition:"start",startIcon:e.jsx(we,{}),variant:"contained",type:"submit",children:"SAVE"})]})]})})},Q=({teamarray:o,statuschange:p,callfrom:h,deletee:d,edetee:x,showss:g,decline:n})=>{const j=a=>{n(a)},v="https://res.cloudinary.com/dusxlxlvm/image/upload/v1718950087/battlefiesta/assets/icon/user_p5egd9.webp",c=q(a=>a.tdm);u.useEffect(()=>{});const N=async a=>{if(a.newEntry){const P=localStorage.getItem("token");try{const y=await(await fetch("/api/tdmseen",{method:"POST",headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"},body:JSON.stringify({tid:a.tournament_id})})).json();console.log(y)}catch(k){console.log(k)}}};return e.jsx(e.Fragment,{children:o.length>0&&o.map((a,P)=>{var k,y,r,i;return e.jsxs(Se,{style:{borderRadius:"10px",overflow:"hidden"},sx:{mb:1},children:[e.jsxs(Ne,{expandIcon:e.jsx(Pe,{}),"aria-controls":"panel1-content",id:"panel1-header",onClick:()=>N(a),className:`header ${a.status}`,sx:{background:a.newEntry?"rgba(6, 146, 6, 0.218)":""},children:[e.jsx(J,{variant:"dot",color:"error",invisible:!a.newEntry,children:e.jsx("img",{src:(a==null?void 0:a.logo)||v,alt:"PlayerLogo"})},P),e.jsxs("span",{className:"name",children:[a.name," "]}),e.jsxs("span",{className:"category",style:{fontSize:"14px",fontWeight:"400",textTransform:"capitalize"},children:["-",(y=(k=c==null?void 0:c.tdmdetail)==null?void 0:k.slotCategory)==null?void 0:y[a.category].category]})]}),e.jsxs(Ie,{className:"details",sx:{pb:0},children:[e.jsxs("div",{className:"teamdata",children:[e.jsxs("div",{className:"imageside",children:[e.jsx("img",{src:(a==null?void 0:a.logo)||v,alt:"PlayerLogo"}),e.jsxs("div",{className:"icon",children:[e.jsx("a",{href:`mailto:${a.email}`,target:"_blank",children:e.jsx(Te,{title:"Email"})}),e.jsx("a",{href:`tel:${a.mobile}`,target:"_blank",children:e.jsx(xe,{title:"Phone"})}),e.jsx("a",{href:`https://wa.me/+91${a.mobile}`,target:"_blank",children:e.jsx(Le,{title:"Whatsapp"})})]}),a.paymentss&&e.jsxs("div",{className:"payss",onClick:()=>g(a.paymentss),children:[e.jsx(Ae,{}),"Payment S.S"]})]}),e.jsxs("div",{className:"teamside",children:[e.jsxs("span",{children:[" ",e.jsx("span",{children:"Name"}),e.jsxs("span",{children:[": ",a.name||"N/A"]})]}),e.jsxs("span",{children:[" ",e.jsx("span",{children:"Category"}),e.jsxs("span",{children:[": ",((i=(r=c==null?void 0:c.tdmdetail)==null?void 0:r.slotCategory)==null?void 0:i[a.category].category)||"N/A"]})]}),a.email&&e.jsxs("span",{children:[" ",e.jsx("span",{children:"Email"}),e.jsxs("span",{children:[": ",a.email]})]}),e.jsxs("span",{children:[" ",e.jsx("span",{children:"Phone"}),e.jsxs("span",{children:[": ",a.mobile||"N/A"]})]}),a.discord&&e.jsxs("span",{children:[" ",e.jsx("span",{children:"Discord"}),e.jsxs("span",{children:[": ",a.discord]})]}),e.jsxs("span",{children:[" ",e.jsx("span",{children:"O.S"}),e.jsxs("span",{children:[": ",a.os||"N/A"]})]}),e.jsxs("span",{children:[" ",e.jsx("span",{children:"Device"}),e.jsxs("span",{children:[": ",a.device||"N/A"]})]}),e.jsxs("span",{children:[" ",e.jsx("span",{children:"FPS"}),e.jsxs("span",{children:[": ",a.fps||"N/A"]})]}),e.jsxs("span",{children:[" ",e.jsx("span",{children:"UTR No."}),e.jsxs("span",{children:[": ",a.utrno||"N/A"]})]})]})]}),e.jsx("div",{className:"playerdata",children:e.jsxs("div",{children:[h=="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:()=>p(a._id,"approved"),color:"success",variant:"outlined",startIcon:e.jsx(le,{}),children:"Approve"}),e.jsx(C,{color:"error",onClick:()=>j(a._id),variant:"outlined",startIcon:e.jsx(oe,{}),children:"Reject"})]}),h=="Approved"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:()=>p(a._id,"pending"),color:"warning",variant:"outlined",startIcon:e.jsx(re,{}),children:"Pending"}),e.jsx(C,{color:"error",onClick:()=>j(a._id),variant:"outlined",startIcon:e.jsx(oe,{}),children:"Reject"})]}),h=="Rejected"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:()=>p(a._id,"pending"),color:"warning",variant:"outlined",startIcon:e.jsx(re,{}),children:"Pending"}),e.jsx(C,{onClick:()=>p(a._id,"approved"),color:"success",variant:"outlined",startIcon:e.jsx(le,{}),children:"Approve"})]}),h=="manageteam"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{color:"error",onClick:()=>d(a._id),variant:"outlined",startIcon:e.jsx(se,{}),children:"Delete"}),e.jsx(C,{color:"primary",onClick:()=>x(a),variant:"outlined",startIcon:e.jsx(De,{}),children:"Edit"})]})]})})]}),a.status=="rejected"&&e.jsx(f,{id:"outlined-multiline-flexible",label:"Reason of Rejection  ..",multiline:!0,color:"error",focused:!0,inputProps:{style:{fontSize:14}},InputLabelProps:{style:{fontSize:18}},value:a.reason||"your Fault",maxRows:6,sx:{minWidth:"96%",mb:1,ml:1}})]},P)})})},Xe=({decline:o,pendingplayer:p,statuschange:h,showss:d})=>(u.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"pendingList",children:p.length>0?e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Team List:"}),e.jsx(Q,{decline:o,teamarray:p,showss:d,statuschange:h,callfrom:"pending"})]}):e.jsxs("div",{className:"middle",children:[e.jsxs("div",{children:[" ",e.jsx(Y,{className:"emoji"})," "]}),e.jsx("h2",{children:"Nothing To Show"}),e.jsx("p",{children:"The List is Empty. Form Resposes will start to appear once Players starts Registering"})]})})})),Ze=({approvedPlayer:o,statuschange:p,showss:h,decline:d})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"approvedList",children:o.length>0?e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Team List:"}),e.jsx(Q,{teamarray:o,decline:d,statuschange:p,callfrom:"Approved",showss:h})]}):e.jsxs("div",{className:"middle",children:[e.jsxs("div",{children:[" ",e.jsx(Y,{className:"emoji"})," "]}),e.jsx("h2",{children:"Nothing To Show"}),e.jsx("p",{children:"The List is Empty. List will start to appear once You Approve Player"})]})})}),es=({rejectedplayer:o,statuschange:p,showss:h,decline:d})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"rejectedlist",children:o.length>0?e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Team List:"}),e.jsx(Q,{teamarray:o,decline:d,statuschange:p,callfrom:"Rejected",showss:h})]}):e.jsxs("div",{className:"middle",children:[e.jsxs("div",{children:[" ",e.jsx(Y,{className:"emoji"})," "]}),e.jsx("h2",{children:"Nothing To Show"}),e.jsx("p",{children:"The List is Empty. List will start to appear once You Reject Player"})]})})}),ss=({all:o})=>{const p=W(),{tid:h}=G(),d={link:Array(1).fill({linkName:"",linkType:"",link:""})},[x,g]=u.useState(!1),[n,j]=u.useState(d.link),[v,c]=u.useState(o.publicpost);u.useEffect(()=>{N()},[]);const N=()=>{if(o.links.length>0){let s=[];o.links.map(t=>{let l={linkName:t.linkName,linkType:t.linkType,link:t.link};s.push(l)}),j(s)}},a=()=>{j([...n,{linkName:"",linkType:"",link:""}])},P=s=>{let t=n.filter((l,m)=>s!=m);j(t)},k=(s,t,l)=>{let m=[...n];m[t]={...m[t],[l]:s.target.value},j(m)},y=async s=>{s.preventDefault(),g(!0);const t=localStorage.getItem("token");try{const l=await fetch("/api/updatetdmtournamentformcontacts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({tournament_id:o.tournament_id,links:n,publicpost:v})}),m=await l.json();if(g(!1),!l.ok)return b.warn(m.message,{autoClose:2300});p(U(h)),b.success(m.message,{autoClose:1300})}catch(l){b.warn(l.message,{autoClose:2200}),console.log(l)}},r=(s,t)=>{let l=t=="dec"?s+1:s-1;const m=[...n],S=m.splice(s,1)[0];m.splice(l,0,S),j(m)};let i={whatsapp:"Provide Whatsapp No.",instagram:"Provide Instagram userId",phone:"Provide phone no.",email:"Provide Email",link:"Provide Website Link"};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"contactinfo",children:e.jsx("div",{className:"form",children:e.jsxs("form",{onSubmit:y,children:[e.jsx(f,{id:"outlined-multiline-static",label:"Public Post",multiline:!0,inputProps:{style:{fontSize:11,lineHeight:"12px"}},value:v,onChange:s=>c(s.target.value),sx:{width:"98%",mt:1,mb:1},rows:10}),e.jsx("h2",{children:"Contact Links"}),n.map((s,t)=>e.jsxs("section",{children:[e.jsxs(E,{direction:"row",spacing:2,children:[e.jsxs(O,{sx:{width:"50%"},size:"small",children:[e.jsx(R,{id:"demo-simple-select-label",children:"Link Type"}),e.jsxs($,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n[t].linkType,label:"Link Type",required:!0,onChange:l=>k(l,t,"linkType"),children:[e.jsx(T,{value:"whatsapp",children:" Whatsapp No."}),e.jsx(T,{value:"instagram",children:"InstaGram"}),e.jsx(T,{value:"phone",children:"Phone"}),e.jsx(T,{value:"link",children:" Link"}),e.jsx(T,{value:"email",children:"Email"})]})]}),e.jsx(f,{size:"small",required:!0,value:s.linkName,onChange:l=>k(l,t,"linkName"),sx:{width:"50%"},id:"outlined-basic",label:"Link Name",variant:"outlined"})]}),e.jsx(E,{direction:"row",sx:{mt:2},spacing:2,children:e.jsx(f,{required:!0,value:s.link,onChange:l=>k(l,t,"link"),fullWidth:!0,id:"outlined-basic",label:i[n[t].linkType],size:"small",color:n[t].linkType=="phone"&&n[t].link.length!=10?"error":"primary",variant:"outlined"})}),e.jsxs(E,{direction:"row",sx:{mt:1},spacing:2,children:[e.jsx(se,{title:"Delete Field",className:"options",onClick:()=>P(t)}),e.jsx(ze,{title:"Move Down",className:"options",onClick:()=>r(t,"dec")}),e.jsx(_e,{title:"Move Up",className:"options",onClick:()=>r(t,"inc")})]})]},t)),e.jsx(E,{direction:"row",sx:{mt:1},spacing:2,children:e.jsx(C,{size:"small",onClick:a,variant:"outlined",children:"ADD"})}),e.jsx(E,{direction:"row",sx:{mt:1},spacing:2,children:e.jsx(C,{type:"submit",loading:x,loadingPosition:"start",startIcon:e.jsx(ge,{}),variant:"contained",children:"SUBMIT"})})]})})})})},ts=({showss:o})=>{const p=W(),{tid:h}=G(),d=q(w=>w.tdm),[x,g]=u.useState(d.tdmsetting),[n,j]=u.useState(!1);u.useEffect(()=>{p(ee(!1))},[]),u.useEffect(()=>{i(d.tdmplayers)},[d.tdmplayers]),u.useEffect(()=>{g(d.tdmsetting)},[d.tdmsetting]);const[v,c]=u.useState(0),[N,a]=u.useState([]),[P,k]=u.useState([]),[y,r]=u.useState([]),i=w=>{if(w=="")return;const D=w.filter((z,_)=>z.status=="pending");a(D);const A=w.filter((z,_)=>z.status=="approved");k(A);const K=w.filter((z,_)=>z.status=="rejected");r(K)},s=w=>{let D=w.target.name,A=w.target.value;w.target.value=="true"&&(A=!0),w.target.value=="false"&&(A=!1),g({...x,[D]:A})},t=async w=>{w.preventDefault();const D=b.loading("Please wait...");await fe("/api/updatetdmtournamentform","POST",x,F=>{b.update(D,{render:F.message,type:"success",isLoading:!1,autoClose:1600}),j(!1)})},l=w=>{let D=document.querySelectorAll(".form_setting .control div");for(let A=0;A<D.length;A++)D[A].classList.remove("active");c(w),D[w].classList.add("active")},m=async(w,D,A)=>{const K=A||"",z=localStorage.getItem("token"),_=b.loading("Please wait...");try{const F=await fetch("/api/updateplayerstatus",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({teamID:w,value:D,reasone:K})}),ne=await F.json();if(!F.ok)return b.update(_,{render:ne.message,type:"warning",isLoading:!1,autoClose:1600});p(U(h)),b.update(_,{render:ne.message,type:"success",isLoading:!1,autoClose:1600})}catch(F){console.log(F),b.update(_,{render:"Failed",type:"warning",isLoading:!1,autoClose:1600})}},[S,I]=u.useState(!1),L=()=>{I(!1)},[te,ae]=u.useState(""),[V,H]=u.useState(""),ye=w=>{H(w.target.value)},X=w=>{ae(w),H(""),I(!0)},Ce=()=>{if(V==="")return b.warn("Enter Reason",{autoClose:1800});m(te,"rejected",V),I(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"form_setting",children:[e.jsxs("div",{className:"control",children:[e.jsxs("div",{className:"active",onClick:()=>l(0),children:[e.jsx(je,{}),e.jsx("h3",{children:"Setting"})]}),e.jsxs("div",{onClick:()=>l(1),children:[e.jsx(xe,{}),e.jsx("h3",{children:"Contact Info"})]}),e.jsxs("div",{onClick:()=>l(2),children:[e.jsx(Ee,{}),e.jsx(J,{min:1,badgeContent:N.length,color:"warning",children:e.jsx("h3",{children:"Pending  "})})]}),e.jsxs("div",{onClick:()=>l(3),children:[e.jsx(Fe,{}),e.jsx(J,{badgeContent:P.length,color:"success",children:e.jsx("h3",{children:"Approved  "})})]}),e.jsxs("div",{onClick:()=>l(4),children:[e.jsx(Me,{}),e.jsx(J,{badgeContent:y.length,color:"error",children:e.jsx("h3",{children:"Rejected  "})})]})]}),v==0&&e.jsx(Qe,{isloading:n,all:x,handleChange:s,submit:t}),v==1&&e.jsx(ss,{all:x,handleChange:s,submit:t}),v==2&&e.jsx(Xe,{decline:X,showss:o,statuschange:m,pendingplayer:N}),v==3&&e.jsx(Ze,{decline:X,showss:o,statuschange:m,approvedPlayer:P}),v==4&&e.jsx(es,{decline:X,showss:o,statuschange:m,rejectedplayer:y}),e.jsx(ve,{shadow:!1,open:S,onClose:L,children:e.jsxs("div",{className:"dashboardbox",style:{background:"white"},children:[e.jsxs(Je,{children:[e.jsx(Ve,{children:"Kindly Submit reason , why you are decining or Rejecting the Team"}),e.jsx(f,{autoFocus:!0,required:!0,margin:"dense",id:"name",name:"reason",label:"Reason",type:"text",fullWidth:!0,value:V,variant:"standard",onChange:ye})]}),e.jsxs(He,{children:[e.jsx(C,{onClick:L,children:"Cancel"}),e.jsx(C,{onClick:Ce,children:"Submit"})]})]})})]})})},as=({teamdetail:o,setcalledit:p})=>{const h=q(s=>s.tdm),{handleImage:d}=be(),x=pe("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),[g,n]=u.useState(h.tdmsetting),[j,v]=u.useState(h.tdmdetail),[c,N]=u.useState({userid:o.userid||"",tournament_id:o.tournament_id||"",name:o.name||"",InGameId:o.InGameId||"",mobile:o.mobile||"",email:o.email||"",os:o.os||"",discord:o.discord||"",utrno:o.utrno||"",fps:o.fps||"",device:o.device||"",paymentss:o.paymentss||"",logo:o.logo||""}),{tid:a}=G(),[P,k]=u.useState(!1);u.useEffect(()=>{console.log(c)},[]);const y=async s=>{s.preventDefault();const t=new FormData;t.append("id",o._id),t.append("name",c.name),t.append("InGameId",c.InGameId),t.append("email",c.email),t.append("mobile",c.mobile),t.append("discord",c.discord),t.append("device",c.device),t.append("os",c.os),t.append("fps",c.fps),t.append("utrno",c.utrno);try{const l=b.loading("Please wait...");k(!0);const m=await fetch("/api/playerupdate",{method:"POST",body:t}),S=await m.json();m.ok?(b.update(l,{render:"Updated Successfully",type:"success",isLoading:!1,autoClose:1600}),k(!1)):b.update(l,{render:S.message,type:"warning",isLoading:!1,autoClose:2200})}catch(l){console.error(l),b.update(id,{render:l.message,type:"warning",isLoading:!1,autoClose:2200})}},r=async(s,t)=>{let l=180;t=="paymentss"&&(l=600);let m=s.target.files[0],S=await d(l,m),I=document.createElement("img");const L=URL.createObjectURL(S);I.src=L,document.querySelector(`#${t}`).innerHTML="",document.querySelector(`#${t}`).appendChild(I),t=="logo"&&N({...c,logo:S}),t=="paymentss"&&N({...c,paymentss:S})},i=s=>{let t=s.target.name,l=s.target.value;N({...c,[t]:l})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"registartionform",children:e.jsxs("div",{className:"form",children:[e.jsxs("h2",{children:["Team Edit : ",j.title]}),e.jsxs("h4",{children:["Organised by : ",j.organiser]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs(M,{sx:{"& > :not(style)":{m:1,width:"25ch"}},autoComplete:"off",children:[e.jsx(f,{size:"small",required:!0,id:"outlined-basic",label:"In Game Name",value:c.name,name:"name",onChange:i,variant:"outlined"}),e.jsx(f,{required:!0,value:c.InGameId,type:"tel",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small",id:"outlined-basic",name:"InGameId",label:"In Game ID",onChange:i,variant:"outlined"})]}),e.jsxs(M,{sx:{"& > :not(style)":{m:1,width:"25ch",mb:2}},autoComplete:"off",children:[g.ask_phone&&e.jsx(f,{required:g.ask_phone,size:"small",id:"outlined-basic",name:"mobile",value:c.mobile,type:"tel",inputProps:{minLength:10,maxLength:10},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},onChange:i,label:"Mobile",variant:"outlined"}),g.ask_email&&e.jsx(f,{size:"small",id:"outlined-basic",value:c.email,name:"email",type:"email",onChange:i,label:"Email ID",variant:"outlined"})]}),e.jsxs(M,{sx:{"& > :not(style)":{m:1,width:"25ch",mb:2}},children:[g.ask_os&&e.jsxs(O,{fullWidth:!0,size:"small",children:[e.jsx(R,{id:"demo-simple-select-label",children:"Choose OS"}),e.jsxs($,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:c.os,name:"os",label:"Choose OS",onChange:i,children:[e.jsx(T,{value:"android",children:"Android"}),e.jsx(T,{value:"ios",children:"Ios"})]})]}),g.ask_discord&&e.jsx(f,{required:!0,size:"small",id:"outlined-basic",value:c.discord,name:"discord",onChange:i,label:"Discord ID",variant:"outlined"})]}),e.jsxs(M,{sx:{"& > :not(style)":{m:1,width:"25ch",mb:2}},children:[g.ask_fps&&e.jsx(f,{required:!0,size:"small",type:"tel",inputProps:{minLength:2,maxLength:3},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},id:"outlined-basic",name:"fps",value:c.fps,onChange:i,label:"FPS",variant:"outlined"}),g.ask_devicename&&e.jsx(f,{required:!0,size:"small",id:"outlined-basic",name:"device",value:c.device,onChange:i,label:"Device Name",variant:"outlined"})]}),e.jsx(ue,{variant:"middle"}),g.ask_playerlogo&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Set a PlayerLogo*"}),e.jsx("div",{id:"logo",children:c.logo&&e.jsx("img",{src:c.logo,alt:"logo"})}),e.jsxs(C,{disabled:!0,size:"small",sx:{mb:3},component:"label",variant:"contained",startIcon:e.jsx(B,{}),children:["Upload Logo",e.jsx(x,{type:"file",accept:"image/*",onChange:s=>r(s,"logo")})]}),e.jsx("br",{})]}),e.jsx(ue,{variant:"middle"}),g.ask_payment_ss&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Set Payment Screenshot*"}),e.jsx("div",{id:"paymentss",children:c.paymentss&&e.jsx("img",{src:c.paymentss,alt:"payment ss"})}),e.jsxs(C,{disabled:!0,size:"small",sx:{mb:.5,mt:.5},component:"label",variant:"contained",startIcon:e.jsx(Oe,{}),children:["Upload S.S",e.jsx(x,{type:"file",accept:"image/*",onChange:s=>r(s,"paymentss")})]}),e.jsx("p",{style:{color:"green",fontSize:"12px"},children:"*Note- UTR/Txn No. must be visible in Screenshot"}),e.jsx(f,{sx:{mb:1,mt:1},type:"tel",inputProps:{minLength:12,maxLength:12},onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()},size:"small",required:!0,id:"outlined-basic",label:"UTR NO.",value:c.utrno,name:"utrno",onChange:i,variant:"outlined"}),e.jsx("br",{})]}),e.jsx(C,{sx:{mr:2},type:"submit",startIcon:e.jsx(B,{}),disabled:P,variant:"contained",color:"primary",children:"Save Team"}),e.jsx(C,{onClick:()=>p(!1),startIcon:e.jsx(Re,{}),disabled:P,variant:"outlined",color:"secondary",children:"close"})]}),e.jsxs("div",{className:"contacts",children:[e.jsx("h2",{children:"Contact Details"}),e.jsx("p",{children:"The organiser has not provided any contact details for the tournament."}),e.jsx("p",{children:'If you are the organiser, check "Contact info" section in the tournament dashboard.'})]})]})})})},ns=({showss:o})=>{var s,t,l;const p=W(),{tid:h}=G(),d=q(m=>m.tdm),[x,g]=u.useState("all"),[n,j]=u.useState();u.useEffect(()=>{var S;let m={};(S=d==null?void 0:d.tdmplayers)==null||S.map(I=>{const L=I.category;m[L]||(m[L]=[]),m[L].push(I)}),j(m)},[d.tdmplayers]);const v=async m=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Tournament!",icon:"warning",buttons:!0,dangerMode:!0}).then(async S=>{if(S){const I=b.loading("Please wait...");await fe("/api/playerdelete","POST",{playerid:m},H=>{p(U(h)),b.update(I,{render:H.message,type:"success",isLoading:!1,autoClose:1600})})}})},[c,N]=u.useState(!1),[a,P]=u.useState(""),k=async m=>{P(m),N(!0)},[y,r]=u.useState(d.tdmplayers),i=m=>{g(m.target.value),m.target.value=="all"?r(d.tdmplayers):n.hasOwnProperty(m.target.value)?r(n[m.target.value]):r([])};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"manageteams",children:e.jsxs("div",{className:"box",children:[e.jsx("div",{style:{margin:"5px 0px",textAlign:"center"},children:e.jsxs(O,{className:"cominp",size:"small",sx:{mt:1.6,width:"200px"},children:[e.jsx(R,{id:"demo-simple-select-label",children:"Choose Category"}),e.jsxs($,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:(s=d==null?void 0:d.tdmdetail)!=null&&s.slotCategory?x:"",required:!0,name:"os",label:"Choose Category",onChange:i,children:[e.jsx(T,{value:"all",children:"All"}),(l=(t=d==null?void 0:d.tdmdetail)==null?void 0:t.slotCategory)==null?void 0:l.map((m,S)=>e.jsx(T,{sx:{textTransform:"capitalize"},value:S,children:m.category},S))]})]})}),e.jsx("h2",{children:"Player List:"}),!c&&d.tdmplayers&&e.jsx(Q,{teamarray:y,deletee:v,callfrom:"manageteam",edetee:k,showss:o}),c&&e.jsx(as,{teamdetail:a,setcalledit:N}),d.tdmplayers.length<1&&e.jsxs("div",{className:"middle",children:[e.jsxs("div",{children:[" ",e.jsx(Y,{className:"emoji"})," "]}),e.jsx("h2",{children:"Nothing To Show"}),e.jsx("p",{children:"The List is Empty. Form Resposes will start to appear once teams starts Registering"})]})]})})})},hs=()=>{const o=$e(),{tid:p}=G(),h=W(),d=q(y=>y.tdm),[x,g]=u.useState(!1),[n,j]=u.useState(""),[v,c]=u.useState(0);if(u.useEffect(()=>{h(U(p)),h(Ue("Setting")),h(ee(!0))},[]),u.useEffect(()=>{h(ee(d.loading))},[d.loading]),u.useEffect(()=>{if(!d.isowner&&!d.loading){qe({title:"Access Denied",text:"You are not authorized to manage this tournament.",icon:"warning"}),h(Be(!0)),o("/dashboard");return}},[d.loading]),!d.tdmsetting)return e.jsx("h3",{children:"Loading..."});const N=y=>{let r=document.querySelectorAll(".controller .cont");for(let i=0;i<r.length;i++)r[i].classList.remove("active");c(y),r[y].classList.add("active")};let a=window.location.origin;function P(y){var r=document.createElement("input"),i=`${a}/${y}/${p}`;r.value=i,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),b.success("Copied Successfully",{autoClose:900})}const k=y=>{g(!0),j(y)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tdmtournasetting",children:[e.jsxs("div",{className:"controller",children:[e.jsxs("div",{className:"cont active",onClick:()=>N(0),children:[e.jsx(je,{className:"icon"}),e.jsx("h3",{children:"Basic Settings"})]}),e.jsxs("div",{className:"cont",onClick:()=>N(1),children:[e.jsx(ge,{className:"icon"}),e.jsx("h3",{children:"Manage Forms"})]}),e.jsxs("div",{className:"cont",onClick:()=>N(2),children:[e.jsx(We,{className:"icon"}),e.jsx("h3",{children:"Manage Players"})]})]}),e.jsxs("div",{className:"material",children:[v==0&&e.jsx(ts,{showss:k}),v==1&&e.jsx(Ye,{}),v==2&&e.jsx(ns,{showss:k}),e.jsx(ve,{shadow:!1,open:x,onClose:()=>g(!1),children:e.jsxs("div",{className:"paymentssmodal",children:[e.jsx("span",{title:"close",onClick:()=>g(!1),children:" X "}),e.jsx("img",{src:n,alt:"payment SS"})]})})]}),e.jsxs("div",{className:"links",children:[e.jsxs("div",{className:"box",children:[e.jsx("header",{children:"Registration Page Link"}),e.jsx("p",{children:"Teams can register for this tournament using the following link."}),e.jsxs(E,{spacing:2,direction:"row",className:"inpline",children:[e.jsx(f,{sx:{width:"250px"},inputProps:{style:{fontSize:12}},id:"outlined-basic",size:"small",value:`${a}/tdmregister/${p}`,label:"Registration Form Link",variant:"outlined"}),e.jsx(de,{titleAccess:"Copy Link",className:"copy",onClick:()=>P("tdmregister")})]}),e.jsx("a",{href:`${a}/tdmregister/${p}`,target:"_blank",title:"Visit Page",children:e.jsx(C,{sx:{pb:.2,pt:.3},startIcon:e.jsx(ce,{}),size:"small",variant:"contained",children:"Visit"})})]}),e.jsxs("div",{className:"box",children:[e.jsx("header",{children:"Public Post Link"}),e.jsx("p",{children:"Find the tournament's public page here. Ensure the tournament visibility is set to 'PUBLISHED' and remember to add content to the public post."}),e.jsxs(E,{spacing:2,direction:"row",className:"inpline",children:[e.jsx(f,{sx:{width:"250px"},inputProps:{style:{fontSize:12}},id:"outlined-basic",size:"small",value:`${a}/tournaments/${p}`,label:"Public Post Link",variant:"outlined"}),e.jsx(de,{titleAccess:"Copy Link",className:"copy",onClick:()=>P("tournaments")})]}),e.jsx("a",{href:`${a}/tournaments/${p}`,target:"_blank",title:"Visit Page",children:e.jsx(C,{sx:{pb:.2,pt:.3},startIcon:e.jsx(ce,{}),size:"small",variant:"contained",children:"Visit"})})]})]})]})})};export{hs as default};
